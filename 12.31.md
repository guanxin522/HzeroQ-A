### 我想问下，我们获取当前用户是底层是什么来的？我启动了多线程，其中一个线程需要获取当前用户，可是获取的结果是null，有什么办法获取当前用户嘛？
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231091643804-461893289.png)
我用的是线程池去启动线程的。
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231091748307-1776547250.png)

>用户信息是线程变量，异步线程获取不到

那有解决方案吗？

>启动线程拷贝下用户信息呗

怎么拷贝?

>启动线程前获取CustomUserDetails，传过去不行吗

可以可以


### 请问根据这些值怎么找不到接口信息呢
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231091905546-42340636.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231091920337-1727472543.png)
  
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231092025786-23807167.png)

>没有配数据权限吗，前缀应该是hzero_platform

是需要自己另外手动配置吗
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231092107830-1447236175.png)

>去权限范围里面创建一条范围   屏蔽hpfm_tenant这张表，屏蔽规则选择平台数据库前缀

已经存在的
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231092157285-1872730162.png)


>选了你的服务吗

还是不行
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231092214405-398499460.png)

>是不是一个redis
发现Redis连错了

  
### 请问一下，后端服务选配1.1.2，后端服务对应的数据库初始化脚本选择哪一个呢？  
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231091959291-945766794.png)

>1.2.0





### 各位大佬，hzero的input组件在ie11里面显示有问题，这个应该怎么解决
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231092307598-2139133638.png)

>有没有线上环境看看？



### 请问下如果我不想接口调用时带token可以实现么

>目前可以用public类型的API，但是权限问题需要想好，是什么场景需要不带token鉴权呢

是给第三方调用的场景，对方不想再手动获得一遍token



### 请问如果是接口客户端调用的话，那么对应进来的数据是没有审计字段的相关信息的是吗？比如userId，这个是不会有的？还是说可以通过配置可以让这个客户端拥有一个用户信息？


### 请问有大佬遇到过这种点击没反应的情况么
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231092423036-2110771114.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231092451662-2090634207.png)


### fileClient.uploadFileWithMD5 上传的文件用fileClient.downloadFile下载下来打不开，请问有大佬遇见过么
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231092512014-398720424.png)

hzero-file  下载下来的也打不开
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231092538617-506630724.png)

>你用swagger下载的？

swagger 下载也打不开  用fileClient.downloadFile下载也打不开

>swagger不要下载文件，用postman

>fileClient下载，我看看你的response怎么构建的

这样写的
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231092636548-466941774.png)

>这就一个输入流，你说的打不开是啥意思呐

是不是有加密操作
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231092704460-1422914709.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231092711784-1458003702.png)

这样上传的
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231092729206-198290827.png)
minio上下载的可以打开

>你下载是怎么下载的嘛

### 请问大佬，如何把默认路由 /workplace 换成别的地址呢

>看看这里 http://hzerodoc.saas.hand-china.com/zh/docs/service/oauth/oauth/


### 这个现象除了邮箱账号错误之外还有可能是其他原因吗
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231092829858-162978768.png)

已经反复验证过很多次邮箱账号了

>什么邮箱  稳定出现还是偶尔

稳定重现的
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231092921673-1866490603.png)

是汉得公司的邮箱 我怀疑是缓存问题 但是我没有找到缓存邮箱账号的地方'

>本地能复现么  发邮箱前 打个断点看看邮箱信息对不对
>这个没有缓存

那我再看看



### 请问下我在初始化1.2.0中hzero-platform初始化数据时报一下错误时什么原因？
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231093037328-1717281194.png)

>1.2还没有发布

哦哦～好的



### 请问这个服务监控控制台报这个错是什么原因
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231093141641-1283271868.png)

>刷新权限试试

刷新权限没有用

>http://hzerodoc.saas.hand-china.com/zh/docs/faq/api/

权限刷新也不行
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231094709050-83453199.png)

请问服务监控控制台这个地址对嘛

>把这个菜单的详细信息发出来看看


这样的
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231095406587-797175744.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231095413274-853486083.png)

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231095419116-2128729527.png)

>网关服务加上这个配置
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231100035985-1865765241.png)
```
- /hadm
- /hadm/
- /hadm/applications
- /hadm/notifications/filters
- /hadm/instances/**
- /hadm/assets/**
```

好的
加上可以了


### 请问下消息模板保存提示这个是什么原因？
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231093156511-1481060997.png)

>富文本编辑器没加载出来

我这是页面报错了导致富文本加载不出来？
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231093417040-961124583.png)

>是ckeditor加载路径的问题。看dist下ckeditor路径,请注意,build完成结束后把hzero-front模块下的ckeditor复制到dist公共目录下

好的


### 请问一下，我这边在新搭建的环境中，访问任意接口都会报401
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231093308960-1366506346.png)

网关服务这边有报错
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231093332778-1552584711.png)


swagger请求接口报401，
>routeNotFound 找不到路由

>哪个服务

网关服务报错
>接口调用的哪个服务

调用哪个接口都是401的状况

>是标准的服务还是你们自己的服务

标准服务的，我这边只是重新部署一下


我这看redis和数据库其实好像是有的
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231095730169-275355668.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231095735956-2121950768.png)

>是访问的哪个服务？hzero-admin ？

从swagger上调用的服务，任何服务都会出现这个问题

>调用的服务和网关服务版本不一致？

我刚才发现有这个报错， 
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231100143937-462758566.png)

在前面有报这个
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231100200225-836013522.png)

>服务路由重复了，你检查下路由表

我把原来的删了，然后重启还是不行



### 请问一下，Hzero1.1.1中台服务监控页面没有对应的路由，是少了什么数据吗？
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231095539730-1378805027.png)

>网关服务加上这个配置
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231100035985-1865765241.png)
```
- /hadm
- /hadm/
- /hadm/applications
- /hadm/notifications/filters
- /hadm/instances/**
- /hadm/assets/**
```

好的 加上可以了


### 请问下首页这个手机登录、忘记密码、三方登录的怎么能用起来，本地装的环境玩不动呀

>这些东西需要对应的配置呀，比如短信有没有开通账户，三方登录有没有开发  邮箱账户有没有配置好
嗯嗯，这个晓得，但是我看手册好像没有对应的描述和怎么配置的

>文档接下来我们会完善

好的

>所有文档，不完善的、缺失的、需要优化调整的，我们都会下个月完善掉，会集中力量写一波文档

我试着在oauth建了一个login.html，然后就是这个报错，我还需要配置什么吗
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231101320393-1134028949.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231101330349-49817517.png)

>访问的地址是什么

http://dev.hzero.org:8080/oauth/login

我追了一下源码，感觉怪怪的 
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231101423535-966120943.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231101427716-609449260.png)

>还改了其它地方没有
再就app.yml加了点东西，就再没改了
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231101552055-630388841.png)

>加这个干啥

不加就报错，就试试

>不需要加这个

再啥也没改了，怎么解决呀

>哪个版本
1.1.2

>正常来说覆盖就可以了

可以了，我重新替换了一遍oauth服务，然后写了一遍就行了
我看了下记录也没改啥


### 初始化数据库第一遍可以，然后删除表，重新来一遍的时候，报该错，是有什么东西没有删干净吗？
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231093701941-1574342372.png)

>你只是删除了表，没有删除序列呀

在哪里啊
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231093725435-1934108088.png)

>select * from user_sequences

没有这个表呀    我把所有的表都删了

>直接百度吧

哪些是可以删除的
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231094100628-304884034.png)

>哪个报错删哪个啊  你看你自己之前发出来的日志

ok


### 请问，审批的时候报这个错是啥情况呢0.9.0
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231094255342-13489600.png)

>你这个数据库是不是用了老的 hzero-workflow的数据库  又用了 hzero-workflow-plus的服务

不是，应该都是0.9的

>你工作流服务依赖的是什么

0.9.0
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231094557053-119756321.png)

>表结构怎么跑出来的  我看看脚本
这个要看什么呢

>如果不想纠结原因的话，调整一下这个
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231095702665-656823153.png)

只需要改这一块吗，还有其他的read_flag吗

>这一个
ok，谢谢



### 审批流里的流程单据关联流程表单这里是怎么使用的呢，比如表单url需要填写的是什么地址呢。Hzero文档没有找到更多的说明
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231101201666-985317030.png)

>relative://页面路由



### 1.1.1版本，报表服务导出CSV，时间格式变成了标准时间格式，请问怎么能转为年月日时分秒格式？
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231094510842-1997906165.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231094518413-795043625.png)

>可以使用格式掩码，你配置了吗




### 请问下有人hzero初始化sql server 数据库表结构的啥时候，执行完初始化后，表全部都建在hzero_platform数据库上了，我是直接执行hzero-resource项目的batch-database-init.sh脚本的



### 请问目前通用导入模版配置这一块有支持多语言的迭代计划吗


### 有人写过 excel 宏，然后通过超链接渲染excel数据的吗



### 请问导入模板可以分配给不同角色用户么，不然每次都得新建

> 0租户的模板所有租户都能用，非0租户的模板只能自己租户用


我在平台级角色下新建0租户的模板，但是别的角色账号登录没有看到0租户的模板？
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231093455119-1661969404.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231093505089-727294260.png)

>私聊吧



### hzero-resource  中的批量初始化脚本在sqlserver下有点问题 eval的时候那个分号被识别成了语句的结束
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231100447968-1312321145.png)

>那你修复下给我一下，我更新下

把分号 ; 加转移符即可解决问题： \;
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231101455146-1951145712.png)

变成这样
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231101506186-2088961713.png)

>这个我们改下



### 请问一下hzero 支持 CAS3 单点吗 ？


### 这个分配员工岗位报错，是因为这些数据的原因吗
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231101628897-1042190825.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231101638314-892460250.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231101642604-2130059744.png)



### 员工岗位分配查询LOV报错  这个是什么原因引起的
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231102453020-339488356.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231102457121-524938873.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231102502413-1753532171.png)

position表一共也就这几条数据   报的是个空指针

>你们是不是覆盖了代码，什么版本，看代码好像时 岗位排序 这个字段为null了，但是数据库是非空

应该没有覆盖   这个会有缓存机制吗

>没有  数据库查询

我们用的版本是1.1.0的  没有对platform代码有覆盖的操作

>检查一下hpfm_unit和hpfm_position的order_seq字段是否必输

两个都是非必输的
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231102932088-282189225.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231102936172-1272459105.png)


我看了下unit有数据排序号是null的 我把它们的排序号加上就正常了  感谢

>好的

### 请问dev环境的部分值集等系统数据需同步到test环境，请问有什么办法？我看到有些表的关联关系是通过自增id来关联的

>有工具   平台文档-开发指引-系统开发助手




### 用POSTMAN发/oauth/token请求的时候,提示解码错误，我是需要先给密码编码吗？
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231101840472-105109057.png)

>参考文档  http://hzerodoc.saas.hand-china.com/zh/docs/service/oauth/
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231101849335-160395039.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231101856420-75830077.png)

好的


### 请问各位大佬，想删掉红框标记的样式该怎么操作
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231101803849-1862544288.png)



### 请问下HZero的仓库http://nexus.saas.hand-china.com/content/groups/hzero/有sqlserver的sqljdbc4驱动吗？ 加载半天没动
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231102319552-1262729447.png)

>你可以直接打开路径浏览看看，应该是有的  
>用这个仓库   http://nexus.saas.hand-china.com/content/repositories/public/com/microsoft/sqlserver/sqljdbc4/
好的

>你发的这个地址是有的，但你用的仓库地址不对
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231103111105-315923734.png)




### 请问各位是否有遇过在手动set入request的相关信息后(即RequestContextHolder.setRequestAttributes(new ServletRequestAttributes(new HttpServletRequest() {.........}),然后使用BaseRepository里的方法查询时会报错的？会报以下的错误
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231102601844-1852148219.png)

如果不手动setrequest的话是可以正常查询的，甚至在set request前进行查询都是可以的

>异常信息多发一点儿出来

这个
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231102648322-1213809282.png)

>再多发一点儿  我主要想看是我们的哪行代码抛出来的
这是报错的所有信息
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231102801096-1236860261.png)

我不太能确定是不是hzero baseRepository抛出来的 但这个情况很奇怪
我们现有的业务情况是打算在队列里进行接口的调用以及部分数据的更新。但发现如果set 了request后，set完后的代码行里相关的数据库操作语句都会报刚刚截图里的错

>你是什么版本

1.0的

>详细的版本号是多少

1.0.3
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231102915453-1276222953.png)


如果是设空也能进行查询：RequestContextHolder.setRequestAttributes(null)，但如果一旦给了HttpServletRequest进去，就会出问题


>给我看boot-platform的版本

也是1.0.3的
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231103038048-561070076.png)

>私聊吧




### 问一下新建的platform一直报类找不到，有人知道是什么原因吗
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231103139595-1311960115.png)

>换一种启动方式试试
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231103150168-431928117.png)

好的
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231103210858-745317492.png)

>换成其他的试试
不行，其他的几个方式都试过了
而且打包到服务器上运行也报这个

>依赖发一下看看
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231103347639-601455956.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231103357783-449034034.png)

>这个是依赖hzero-parent的么
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231103407352-37289821.png)

自己建了个parent 引的也是hzero-parent
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231103426761-1651122323.png)


>直接改成我们的parent试试能不能启动
改了还是不行

>打包发给我我看看吧

>mvn clean 一下把target删掉
还是不行


>你把这部分注释放开试试 
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231103524270-1042410885.png)

好的

>然后 mvn clean package -U 一下

不行这我都之前都试过

>我用你给我的工程 我把parent改成我们的 我能正常运行

不改parent可以吗

>我拉不下来你的parent  你打包能打包么 mvn clean package不报错？

打包都是正常的
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231104706752-1810079241.png)

>你试试 mvn spring-boot:run
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231104834153-942389674.png)

>删掉本地  仓库  io/choerodon下的所有内容重新跑一下那个命令试试

好的
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231104912452-1368700557.png)

我好像没有那个文件夹

>你 mvn dependency:tree > dependency.log   把输出的这个文件发给我看看

好的

>把仓库下 org/hzero 这个目录下的全删掉再试试

好的 删掉了重新运行的
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231105237828-2119799982.png)

>你把这个删了
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191231105251789-1607307583.png)

ok

>这个仓库你们自己的？ 为啥要覆盖我们的依赖?
没有呀，这个是自动生成的

删了也不行啊
>还要再把org/hzero的删掉

还是不行 maven 的setting.xml镜像地址要改吗

>好 我远程你电脑看看吧


### 请问下hzero 1.1.1 有登录超时自动退出的配置吗？


### 我现在要做一个不需要登录就可以访问的接口，除了配置permissionPublic = true 还有什么地方需要配置吗？
>就这个配置

这个配置加上了，但是访问接口会报403

11:00记录
