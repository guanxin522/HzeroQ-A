### 请问一下把java8切换成java9微服务启动不起来，是因为版本不支持吗
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304152932098-910694693.png)

>不应该我用11都能起来
>你看看启动失败的原因是什么

是要引入什么依赖吗
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304152956225-678836981.png)

>参考这个解决方案  https://blog.csdn.net/alger_magic/article/details/83041811

那就是说默认只支持java8，要用java9+每个服务都得依赖咯

>嗯

OK


### 问一下大佬们 文件服务已经配置文件存储位置为本地，上传图片成功，下载图片成功，但是无法预览图片。日志文件没有报错信息，页面显示
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304153054312-217121163.png)

是需要修改路由配置吗

>有配置nginx代理吗

这个
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304153123594-862628274.png)

>把你的文件服务配置截图看看

开始Nginx和文件存储服务路径配置的都是/hzero/data/，还是没用所以修改了线上的文件存储配置
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304153142669-1007627257.png)

>你这个ip是文件服务的ip地址嘛

是的

>路径映射也不对应，应该设置上面的那个配置为默认
>nginx是在1.190这个机器上嘛

是的

>这两个配置是对的
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304153231885-432787315.png)

开始的时候使用这个这两个，但是还是无法访问所以我改了一下试试
可以进行上传下载，但是无法预览
文件也确实传到了服务器上

>你不配置nginx也能上传，不能预览就是nginx配置不对，你把server_name配置删了，重启nginx试试

好的 稍等一下 我是本地开的虚拟机 应用开太多 内存溢出了
文件存储配置不能修改
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304153839167-505877366.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304153848259-1244341494.png)

已经解决了 我在后台数据表中将hfle_storage_config配置删除后重新添加，本地代理地址没有添加http://所以图片无法预览


### 问一下 ，hzero有基于https请求的封装么？

>看一下群文件的这个
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304153425004-861914717.png)

好嘞谢谢

>这个封装是什么意思，是要调用外部https的API还是我们的前后端访问地址用https方式对外暴露

调用外部的api

>那可以使用接口平台来做透传
>新版本的接口平台支持https的API了

这个是什么意思，没明白

>用接口平台服务，可以去看文档了解

是这个么
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304153512515-154687872.png)




### 工作流组件1.2.0，其他部分1.1.1版本，然后工作流组件里边新增/修改接口之后重启，iam_permission里边的接口信息不会新增或者修改，必须先把组件版本改回1.1.1重启之后才能正常，请问有没有什么文档或者配置需要修改才能解决这个问题呢？

>就是因为1.1.1版本的绝对路径的表单显示不了嘛，这边的表单都是绝对路径，就升级到1.2.0了，有没有别的办法可以解决绝对路径的问题呢？
>版本单独升级之后，别的问题没怎么发现，就这个一个问题，实在不行也就只能整体升级了

>调刷权限接口的时候看下日志 看下是什么原因刷权限失败

这个是在哪个服务看日志？

>iam服务

就是调用哪个权限刷新接口是200
正常的，refresh success
但是实际上，表里没有更新
因为调用刷新方法的时候，输入的参数是hzero-workflow-plus   1.1.1.RELEASE
但是实际我们的这个组件版本是1.2.0.RELEASE，调用刷新方法的时候，版本写1.2.0.RELEASE会报1.2版本的服务没有在运行

>你们升级1.2.0 配置文件有跟着修改吗
>bootstrap.yml里面的服务元数据版本信息  所以日志也没有报错吗

1.1.1的没报错  这个是没改，我改了试试
是这个吗？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304193251817-312168512.png)

>工作流组件1.2.0，其他部分1.1.1版本，然后工作流组件里边新增/修改接口之后重启，iam_permission里边的接口信息不会新增或者修改，必须先把组件版本改回1.1.1重启之后才能正常

>你这里是说用的1.2.0的工作流服务 然后用了1.1.1的组件 版本不同步的时候重启 api信息没有变化 版本同步的时候重启 api信息更新了？

是的，就是pom的版本改成1.2.0，就不同步，改回1.1.1就可以
我刚改了bootstrap试试

>检查下依赖吧 保证用的starter-core跟parent版本一致

哪里？
改了bootstrap之后，刷新权限的时候，输入的参数是对的版本了，但是，权限表里边还是没有


### 请问，这样数据集定义有问题吗？为什么图二报表参数多选2个，但导出excel就剩一个了
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304193404230-1655344320.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304193408945-40162885.png)

> F12看一下请求地址和参数
>另外这个是from后面参数用的，不是用在select后面，用在select 后面，就算拼接上去，也是类似 select 1,2 as test,这样，这样其实也只有一个字段列，我们的报表服务不支持动态列，都是先定义好了列的

谢谢


### 请教一下各位大佬，hzero系统有人做过以超链接的方式跟外部系统对接嘛？外部系统直接访问我们的页面做修改

>这个要首先要搞定单点登录问题，从外部系统链接我们的页面这个是可以

好的。谢谢
如果没有单点登录这种可以实现吗？有什么实现思路吗

>没有就需要外部系统拿到token才行，不然不能配置权限呀，也不能说把API全部搞成public的，这样也不安全

好的


### 请教下大佬们，绑定第三方用户的接口的这个参数providerId可以从哪里获取到，是否是控制台里配置的 第三方提供的appId
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304193542271-1496388744.png)

>三方应用管理下维护三方信息
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304193556137-1743591925.png)

好的，多谢


### 大家知道我们有哪个Hzero项目用阿里云的API网关的？




### Sqls类的 >= > < <= 这几个方法可以也添加一下ignoreNull参数吗
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304193639713-1823577653.png)

>好



### 请问启动工作流今天突然员工编号在提交工作流的时候改变是为什么，我在单据里面看是00045777，然后提交工作流就变成了000457，我用流程启动选当前我登录的用户就能传00045777，只要不选就是000457，而且员工表里面没有000457这个员工

>截图看看
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304153547670-806091512.png)

>怎么发起的

单据上面发起的
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304153605591-305456063.png)

我看服务器日志接收的参数也是000457
走的内部工作流 平台工作流

>你们是不是自己做二开了  这个页面样式不太对

没有做

>这个跟平台的展示都不一样啊
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304153640183-1659196843.png)

哦，刚刚前端说只改了一下样式

>你现在流程启动自己启动一个试试看吧  看看符不符合预期

流程启动不选模拟用户就会传000457
刚刚提交的
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304153714576-249444765.png)

如果我选模拟用户就能传这个员工编号过去
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304153727074-1043521418.png)

>流程启动不指定员工默认用当前用户的员工发起

嗯知道，我选的这个就是我当前用户绑定的员工
应该传0004577，但是传的是000457

>啥意思  你说参数是这个    启动之后变成000457？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304153922389-202856704.png)

对

>先看看后端返回参数吧

哪个地方返回的参数

>查询代办事项列表

代办事项没有，不是当前用户审批，我实在我发起的流程看的

>在页面发起一个，然后看看response
>看看用户有没有设置自动转交

没有设置
返回的也是00045777

>在流程启动页面上看看 启动接口儿多返回值

流程启动不选用户就默认startuserID就是000457

>那当前用户绑定的是不是这个员工？
>看看员工定义

![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304154018585-1385392854.png)

>有没有手工改过员工信息  删一下 hpfm:hr下的所有缓存试试

我们业务改了然后她又改回来了

应该是缓存问题

>那删一下缓存吧

谢谢  员工用户也会缓存，没想到
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304154050085-273966842.png)

>没事  因为这个查询频率太高了

嗯嗯


### 请问这个我用了怎么不生效 直接返回空集合了
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304192906510-2058900359.png)


### 这边打算合并调度服务到平台服务中，两个都是0.9.0版本的，官网最早的服务合并指南是0.10.0版本的，照着配置后启动的时候有报类重复，不知道是不支持0.9.0版本的服务还是配置问题？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304193004673-1386610393.png)

>0.10实现服务合并是平台这边也做了些处理的，0.9版本可能也需要做一些处理，@朱双飞-中台 要你看帮忙指导下
>这个bean冲突，你需要覆盖修改bean名称


### 问一下，多sheet页导入，不同sheet页可以数据共享吗
>不能

好的，谢啦



### 关于https调用外部api的文档在哪里能看到？

>具体可以去系统操作下
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304193726068-56849444.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304193739901-849507678.png)

>后面文档我们会完善下，具体还是要自己多测试



### 各位大佬，请问一下IActivitiService里边的processInstanceForecast，executed字段，在界面上审批通过之后，会变成true，但是在监听里边传入流程id去获取的时候，第一个节点的完成，删除，第二个节点的，创建，分配配置的监听器，获取的这个值都是false。。。这种情况怎么排除已经审批过的节点呢？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304193753570-1576183793.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304193804724-854376961.png)

>你是要做什么

我这里是要把下一个节点的人发送到别的系统代办信息

>下一个节点？下一个节点创建前谁都不知道工作流怎么走，怎么取
>你无法预知当前用户的操作啊

第二个节点的创建或者分配的监听的时候，也获取不到吗？
我看里边有值的，就是跟界面获取的不一样

>啥意思 配在哪个节点上就在哪个节点上触发啊

我尝试在当前节点【操作是审批同意】的完成，删除，下一个节点的创建和分配都加了监听器，通过日志知道，在这四个位置的监听器，都取到了数据，两个流程节点的都有，但是，当前节点的excuted获取到的值是false，
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304194415376-482383503.png)

，就是界面上查询到的是true，但是在那4个监听时点上，值都是false，就无法过滤掉已经审批的节点

>取到了啥数据？

取到的数据跟我刚才图里界面上的，除了已审批的节点是excuted=false之外，一模一样
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304194450936-914203811.png)


>你掉的接口不对，检查种子数据对不对 或者有没有自己二开代码
>我还是不知道你要干什么  你挂完成和删除 当前节点肯定已经审批完成，你挂创建跟分配那就没有审批完成啊

想要当前节点走完，走到下一个节点的时候，通知下一个节点的人去审批【其他系统的人】

>那挂下一个节点的分配不就好了么

然后监听器里边我通过流程id，获得整个forecast
怎么去过滤掉已经审批的节点呢？

>为啥要获取整个forecast?
>你要去当前审批人   execution.getAssign不就行了

execution.getAssign 是哪个方法里边的呢？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304194538634-295367447.png)

>哦 对了 你是其他服务的    这个方法是工作流服务的，外部服务配监听器 流程参数里不就有审批人么 直接关联映射就好了

我是工作流服务啊

>你是继承工作流服务自己定义监听器？

是的

>这个方法返回就是审批人
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304194614146-1196133729.png)

我找找
这个方法取出来的是String类型的，是审批人的什么信息呢？
我这边需要用到EmployeeNum

>就是


### 请问一下调度任务的执行器只能用ip配吗
>目前是的
>一般使用都是自动注册，会自动注册IP，IP地址变了，启动服务进行注册也会注册新的IP。但是手工注册，目前做了IP地址格式的限制，其实理论上用域名也是可以的，只是目前限制了。下个版本我们考虑把这个限制优化下。

好的，多谢




### 创建前端项目的时候 遇到了这个问题 请问怎么解决
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304193825963-576493518.png)

>path环境变量配置不当，导致无法找到指定的程序

git 的吗

>是的
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304193906879-1979806340.png)

我试试。谢谢啦


### 请问hzero平台服务的库存组织和业务实体这两个功能有没有维护页面，在系统上找不到



### hzero-workflow-plus-saas-1.0.1 工作流查询岗位时报错  这个需要怎么处理
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304193927566-754732595.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304193931534-390624837.png)

>看服务器日志

这个
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304193944600-1275120126.png)

>平台服务的日志
>这个API是platform服务提供的呀

这个是 srm-workflow 的日志
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304194011262-1032014781.png)

![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304194037452-1723071017.png)

>看日志拼装出来的SQL就不对，where后面没有内容，应该是少了条件，这个错确实我们需要优化，但是问题应该是少了条件
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304194057643-932775485.png)

这个需要传什么参数  我看页面并没有传什么参数
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304194106127-1842847766.png)

>这不是post请求么，看请求体

没有参数
这个传个 1 就不报错了 但是页面什么都不传
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304194239881-1534533905.png)

>平台这边没找到什么问题 你看看什么错吧
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304194305403-278703787.png)

那边传什么参数了没有

>只有分页信息

会不会 和 hzero-workflow-plus-saas 版本有关 我这边是 1.0.1.RELEASE

>这个逻辑没改过  先看看日志报啥错

这个是 日志
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304194356764-430448785.png)




### 请问在什么情况下会出现 权限校验member_id 为-1 的情况Hzero版本 1.1 登陆是通过 new UsernamePasswordAuthenticationToken 方法做的模拟登陆
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304194137561-999295436.png)

>-1 是匿名用户

请问 能做的非匿名的效果 这里需要获取到这个权限



### 工作流报保存报错
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304203324391-2121621400.png)

>这个
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304203332168-1418159849.png)

工作流提交后 在我的待办下面查不到 改如何处理好点  /

>可以看流程监控
>节点上的所有条件都不满足

我都重新配置了一遍  
我启动的流程里面都没有这个节点 ？为啥它老是报这个错呢  
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304203515700-2048497152.png)

>这是网关

那我要怎么弄好点呢  
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304203536881-872425666.png)

不管我咋配都报错，明天请帮忙看一下 非常感谢 
org.activiti.engine.ActivitiException: No outgoing sequence flow of the exclusive gateway 'eg_auto_e561c228-e324-4419-ac3f-fed10c79fcf4' could be selected for continuing the process


### 

### resource工具对于高版本的mysql怎么支持
>自建pom然后替换掉低版本的mysql依赖

只需要替换jar里边的pom文件就行了是么

>是liquibase-tool吗

这个
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304203804089-2110322780.png)

>这个明天我们升级一下好了

>安装器升级了，你重新拉一下最新的1.2版本resource


### 单据权限，里面包含userId和roleId，使用过程中发现，启用了单据权限的页面，偶尔能查到数据，偶尔查不出数据，后台查看日志发现，是单据权限的userId和roleId偶尔无法获取到。
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304203551969-551015519.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304203559381-1447215648.png)

同一个用户，频繁操作启用了权限控制的页面。就会出现这个问题
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304203635694-678642124.png)

这里的订单行明细，启用了单据权限控制。
关联了启用单据权限控制的表。

>提个缺陷到问题平台，我们复现下

好的


### 下载文件，这种是什么情况，没报错日志
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304203416771-333848125.png)

>你是minio吗，可以登陆上去找找看，报的错很明显了，就是找不到文件

但是我在这里是可以查到该文件的
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304203437347-125890872.png)

并能成功下载

>截图截前面点的，桶名是啥

好吧，看到了，桶名错的.

为何下载的时候是一个响应的xml文件，并不是我上次的那个文件
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304203727240-100751554.png)

下载的时候是个xml文件，这是什么情况

>你打开看看文件对吗，你到底是做测试还是啥？

文件不太对
我上传一条在这里可以看到的，然后我根据上传返回的路由去下载文件，发现下的都是response.xml,
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200304203901138-1925979347.png)

>页面下载有问题吗

没问题  正常的一张图片

>那就是你用postman测试的方式不对呀，这个是有重定向的，好好研究下
>说明平台功能没有问题

嗯，好勒我试下

>重定向跳转其实是一个新get类型的访问地址，这个地址直接访问会有response输出流，如果是浏览器就会直接渲染成图片了。postman看看是不是需要调什么属性。另外前端开发我们有封装组件，很多地方都有显示图片的功能，参考做就行了
