### 请问各位大佬 我们数据库是oracle 前端页面初始化的时候self接口报错
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312111022773-1169020053.png)

请问是数据库的原因吗

>Oracle数据库如果没有分schema，安装文档是有说明的，要去掉数据权限跨库查询的数据，不然你看sql，不是表前面自动拼接了schema前缀吗


### 请教一下，启动hzero-admin服务的时候报这个错误
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312111125776-1597078234.png)
有人遇到过吗？

>造成起不来还是，仅仅是个错误，这个可以不用管，如果hzero-iam有正常启动，这个错误应该是不存在的

好的，多谢


### 请问下消息服务怎么用，接口为啥没有啊
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312111547847-1884651771.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312111552451-1318908323.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312111557231-1029212169.png)

>消息服务客户端的使用   是注入messageClient   import org.hzero.boot.message.MessageClient;
>这里实现的肯定是你自己的service接口啊
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312111626066-1500996939.png)

这就懂了

>OK


### 这个审计的命名，我应该命名那个参数的
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312111701989-1703590965.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312111718551-2136238615.png)

>看这个
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312111727981-1323084278.png)

好嘞
我起的审计别名，没有存储进来哎，记忆是controller类名+方法名哎
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312111750169-508546373.png)

>私聊下  

测试的效果不起效，具体问一下你怎么配置的

>看文档，看看配置有没有开启

开启了
如果不命名，数据库存储的是类名+方法名， 但是命名的又不起效

>开debug日志看看
>命名不起效是什么意思 你把你配置发出来看看呗 你说不起效啥都没有我也没办法判断啊
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312112133096-919969667.png)

>你把你配置发出来看看

![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312112147698-1450692076.png)

>不是有人私聊你这里写的是SpEL表达式了么，字符串用单引号括起来

这是刚才的测试结果
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312112228445-1309165228.png)

那个报错，也存不到数据库 报错信息就是上面的

>https://baijiahao.baidu.com/s?id=1618293103449832238&wfr=spider&for=pc 你看看这个
>表达式写错了，你先看看语法
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312112258278-590819244.png)



### 可以麻烦您有空的时候帮我看看平台上的选配服务里1.2版本的哪些服务的配置文件是没更新的吗？我们这边拉了一遍服务选配上的1.2.1版本的部署了，不知道除了网关服务还有什么服务的配置文件是有差异。如果有的话我们重新更新一下。或者选配服务的代码更新后麻烦您跟我说一下


### org.hzero.fragment.service.FileHandler.class请问 平台服务1.1.0升级到1.2.0 的时候 启动报这个错误是有什么依赖没有引入吗
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312112319742-474307715.png)
\
>完整日志发出来看看  pom也发出来看看



### 想咨询下，操作过程中，前端页面接口突然报错401，刷新提示登录失效，这个是怎么控制的？



### 请问这个权限是不是每个角色都必须要有的 我把这个去掉后个人中心就403
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312112403121-1654707692.png)

>把个人中心哪个API报403，发出来看看，理论上个人中心的API都是login的
>如果有问题，我们好修复

![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312112514442-1750684360.png)

>好的，谢谢 我确认一下
>感觉是HCBM合同产品自己加的，这种用法有点问题，个人中心是全局的，其实和平台或租户没有关系，就算要加配置，也需要用login的API来包一下，针对配置维护这个功能，我们后面也可以考虑增加一个用户级的API




### 这边这个js应该就是因为这个value的参数没有传值，导致常量的参数不会正常写到xml里边去，我这里改成从数据源取参数就可以了，以后是不是考虑优化成value||parameter.parameterValue||''
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312112534470-202749352.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312112540170-959369710.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312112544503-990580313.png)



### 各位大佬，请问这种写在后端服务里边的js，我想要修改的话，要怎么修改呢？我用相同路径相同文件名覆盖的方式好像没有生效，页面加载的还是原来的js。
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312111825615-1874631846.png)


### 问下群里的大佬，执行器为什么会自动下线啊，怎么操作才能改为上线
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312111840446-663378256.png)



### 请问在调用接口, 返回信息里面获取Lov值的时候, 报这个错是什么原因呢? 
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312111934211-1178422337.png)



### 我想问下hzero  编码规则缓存里存的三种类型标识的是什么
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312111950970-341310931.png)
哪一个表示正在使用的序列

>都是正在使用的

sequence表示的是什么？
sequence跟used有什么区别？
我想看下当前序列用到多少看哪个

>sequence是序列，used是正在使用的标记

还是以前的逻辑，用一个就+1是吧？

>嗯

我先本地试一下。感觉缓存取得不对。序列一直没变

>检查redis配置对不对



### 请问1.2版本的必须校验租户id参数的配置是以哪一个为准的？平台文档写的是check-tenant，但服务选配里下载下来的是check-organization
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312111103915-259166558.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312111112096-923919470.png)

>以文档 check-tenant 为准，选配的下来的代码，没有更新，后面我们更新下

好的，谢谢



### 框架的数据权限屏蔽，再分页的时候，如果分页前面有其他查询会失效。
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312112617381-68974628.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312112623200-742602579.png)
这个是什么问题  如果不把上面那个注释掉，就会报下面那个错
数据权限的问题谁来解答一下

>这个问题我们会去验证

好的。那现在有其他方式处理么？

>我不是说了吗，我们得先验证下


### 请问是否在网关服务中将检查租户ID的参数设置为false后请求会自动把url里的租户id的参数给去掉的？还是说这是由前端请求控制到底带不带租户id的参数，在1.2的缺失权限管理页面请求的url是不带租户id的，但是iam服务这个接口是带租户id的，所以报了403，这是前端代码未加租户id参数导致的吗？还是说因为网关服务关闭了租户id检查导致的？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312112648313-665055192.png)

>都是有前端控制的，不会自动去掉  只是不做校验而已


喔，好的，那这算是前端页面的疏漏bug了吧？因为是租户级功能可是又不带租户id，就找不到对应的api的了

>什么页面报出来的

缺失权限管理，还有单据权限里维护权限维度里也有，刚刚同事说他在本地启动没问题，我们再测一下看看是不是其他问题导致的

>那还是按照403排除的思路处理好了，这个API就是平台级API

，因为刚刚看请求的url里不带租户id就报403了，刚刚看过两个请求同一api的，一个请求时有带租户id一个没带，一个成功一个失败了，所以感觉应该跟这个租户id参数有比较大的关系，我们再排查测一下看看



### 请问一下HZERO自定义单点登录要怎么开发，有没有开发指引？

>是标准的不支持对吧，这周末左右发布的1.3版本会增加自定义开发的模式

嗯嗯，好的

>你们是哪种单点登录平台？


### 我创建了子账户管理，登陆不了，总提示密码错误
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312112858781-694815054.png)

>你自己输入密码没有，没有的话就是安全策略的默认密码

修改过密码。
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312112923410-98895795.png)

>这个目前没有遇到过



### 请问下大家有没有做过多个区域的hzero之间同步登录权限信息？



### 请问一下，新注册的服务在eureka中能看到，但是swagger里找不到会是什么原因导致的？  不管怎么弄，swagger里就是不显示
>服务器能访问你微服务的地址吗

可以的

>你去看看admin的服务的日志吧
>还有就是检查一下路由有没有刷上去，这个可以去平台治理下的服务管理看，没有自动刷上去，也可以手动维护

手动加了路由就可以了，但是为什么自动注册不了呢，之前都可以

>还是要从日志分析，猜不出来什么原因哈




### 这里获取到的userDetail一直为null, 然后获取不到租户id, 请问是为什么呢? 
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312113031247-1225619579.png)



### 请问  导入时readValue返回值全是null是为什么呢?
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312113043386-1690102107.png)

>主要检查你的程序入口，是什么类型的API ，

>自己打断点调试下


### k8s集群,	1.1.0 版本的hzero-file，文件存储选用 minio，
存储的中文文件可以直接访问，
通过接口/v1/{organiziationId}/files/redirect-url,中文文件的会报错
```
<Error>
<Code>XMinioInvalidObjectName</Code>
<Message>Object name contains unsupported characters.</Message>
<Key>3/6e9fdd87ad944c98af6c73bbf4123688@>�U.png</Key>
<BucketName>xjgroup-hippius-submenu</BucketName>
<Resource>
/xjgroup-hippius-submenu/3/6e9fdd87ad944c98af6c73bbf4123688@>�U.png
</Resource>
<RequestId>15FADDE3563DEBCA</RequestId>
<HostId>e878eb70-f569-4c5f-ae80-fa8793c3d4a6</HostId>
</Error>
```


>检查一下数据库里的编码，也就是说，数据库文件hfle_file表下的地址，中文就是乱码的吗

不是乱码，

>那是minio存储的时候乱码，你也检查下

数据库和minio都没有乱码
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312113304405-1722430994.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312113330609-1150269412.png)

>看看获取签名地址的接口返回的是什么


### 请问这个文件预览地址 ，可以自定义其他获取文件的URL吗
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312113250611-1720058967.png)

>目前不支持，用标准的预览API，只能是系统的文件存储

如果我想预览自己的文件，不是存储在系统的里面的，有什么解决方式吗

>这个就看你用的什么做预览了，原生API也是可以用的
>这个可以给我们提个需求，我们后面支持一下，我们加一下也不复杂

就做类似目前这个文件服务的预览风格
应该是后台转成pdf传输到前台来的是吗 

>嗯，我们后面可以增加一个，传外部文件地址的API进行预览的功能

>你要用onlyOffice预览嘛

http://10.0.5.45:21190/hfle/v1/3/files/redirect-url?access_token=6ca00579-3a63-421f-baa5-a6733f98aef9&bucketName=hippius-submenu&url=http%3A%2F%2F10.0.5.45%3A20900%2Fxjgroup-hippius-submenu%2F3%2F8b0872220eb340a1af16e06a3ecb84e8%40%E5%92%A8%E8%AF%A2.png
会返回这个

http://10.0.5.45:20900/xjgroup-hippius-submenu/3/8b0872220eb340a1af16e06a3ecb84e8@%A8%E2.png

onlyOffice 我看只支持word 是吗

>目前是的

excel这些呢 有别的是吗预览的组件吗   除了后台转化成PDF

>文件格式不复杂，可以使用kkfileview，支持的格式很多
>访问这个接口，返回的是什么
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312113655231-234001281.png)

好的，我试试

http://10.0.5.45:21190/hfle/v1/3/files/signedUrl?access_token=6ca00579-3a63-421f-baa5-a6733f98aef9&bucketName=hippius-submenu&url=http%3A%2F%2F10.0.5.45%3A20900%2Fxjgroup-hippius-submenu%2F3%2F8b0872220eb340a1af16e06a3ecb84e8%40%E5%92%A8%E8%AF%A2.png
返回
http://10.0.5.45:20900/xjgroup-hippius-submenu/3/8b0872220eb340a1af16e06a3ecb84e8@咨询.png

>看下文件服务的日志，是不是报错了
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312113753917-2119728955.png)


### 请问hzero企业认证是可以支持自动审批的吗？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312113719265-1792970905.png)

>这个企业认证应该不是hzero标准功能，问问产品吧

好的了解


### admin账号的租户管理员角色没有“分配权限”这个按钮吗
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312113814253-1287744899.png)

>第一个角色是上级分配的，是不能去更改权限的
>你这里的是租户超级管理员，会自动拥有所有租户级的权限，不需要分配

噢噢，好的


### 调用融合环境的导入接口报403，iam权限刷新不进去，是依赖的版本不对么
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312113840482-2077206304.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312113845998-1408624222.png)

>这是你自己的服务的接口权限没刷进去，跟你的依赖没有关系
>vpn连接的话 要本地启一个iam服务来刷权限



### 请教各位大佬，使用文件服务在前端预览图片的时候提示跨域，无法获取图片咋办？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312113912244-379034596.png)

>你是怎么显示的图片？怎么发起的这个请求？当前页面的Url是什么呢？




### 请问一下大佬们，permissionLogin = true这个注解属性对应的切面捕获类是在hpfm服务的哪个具体的类呀？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312113931170-2070510781.png)

>io.choerodon.swagger.swagger.CustomSwaggerOperationPlugin
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312113949514-1713242165.png)

好的,谢谢。

.不客气




### 异步导出的问题，前端1.2版本是不是没有这个菜单 【文件管理】->【异步导出文件】
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312114023030-715092836.png)

>异步导出监控   放到hpfm，系统管理了



### 我想问下这里算是写死了json转对象的数据格式只能为年月日时分秒吗
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312114056365-1450831053.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312114059998-2075930061.png)



### 请问这个接口为什么在获取Lov的值的时候会报这个错误呀, 这个接口是配置在一个虚拟菜单的权限集下面的, 是哪里配置的问题嘛?
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312114117207-1605082671.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312114123115-1951273782.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312114136004-584301575.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312114141400-1533517872.png)



### 请问一下，hzero的注册中心和配置中心是从那个版本开始支持替换成其他可选组件的？NACOS, ZOOKEEPER 等等。




### 请问个人用户类型的单据维度其参数是固定为{userId}的吗？ ，只有业务类型的单据维度才能切换成其他比对数据吗？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312114205964-558644961.png)

>我怎么感觉怪怪的。sql可以这样拼的吗

嗯，权限规则功能可以替我们在指定的表查询中添加上条件限制。

>#{useId}是作为参数的吧



### 我想问下 工作流流程定义得编辑页面  进去之后是空白 可能是因为什么原因导致得？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312114234558-1598473558.png)


  
### 工作流的编辑页面，这几个请求访问的是域名  其他的请求都是正常访问ip的  请问一下，是哪里需要配置一下吗
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312114256541-1270413810.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200312114259834-1518294526.png)

>前端和工作流后端都全局搜索下这个域名呢？


### 请问如果说配置了角色和用户的数据权限里的权限数据来源是哪里？我维护了单据权限，但是在对应的角色和用户维护权限的页面都是显示：当前暂无可维护的数据权限。想请问一下这两个地方的数据来源是哪里？还是说我单据权限可能维护的有问题？




