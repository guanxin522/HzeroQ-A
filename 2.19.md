### 请问有人遇到过这种错误吗。。平台服务启动时客户端无法连接注册中心，这边已经确认defaultZone一致
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200219101742921-383021105.png)
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200219101755369-1527214298.png)

>一般是网络原因

目前服务端和客户端服务都在一台主机上

>检查下配置吧 是不是有环境变量覆盖了原本的配置


### 请问配置成https之后，首页访问报这个错，是我哪里改漏了吗？
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200219101838989-2132860384.png)

>前端和API网关都需要https协议

ok后端除了oauth这里改，还有哪个服务需要改动吗？

![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200219101903435-389069529.png)

>网关你有代理吗？

在nginx配置几个了ssl转发。
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200219101953981-1501205227.png)

是否有遗漏呀？

>你这和我不一样，我这边是前后端不在同一个服务器，通过两个域名分别配置了nginx跳转
>解决方法应该一样

嗯嗯，我的所有前后服务都在一台机器上，所以用的同一个域名做转发。
除了hzero-oauth服务修改配置，前端修改api网关，nginx配置ssl，还有其它需要注意修改的点吗？

>前端配置API_HOST也需要改
>oauth不需要单独配置，因为它也是走的网关

前端是这个地方改了api host，但是还是一样的报错
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200219102103910-612792756.png)

>我看你报错截图的地址是一个IP，不是配置的域名，建议前后端还是分开，比如前端cmsuat.hytera.com ,后端的域名可以是。cmsuatapi.hytera.com,用同一台机器，端口也怪怪的，前后端可以理解成就是两个独立的应用

如果是分开两个https的话，这个地方配置需要什么修改吗？
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200219102128889-2001041709.png)

>域名变了对应修改
>思路是前后端要分开用两个二级域名，对应修改配置就好

好的，多谢，我试一下配两个域名。


### 请问下问什么这里调用编码规则出现这个错误
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200219102205199-113018860.png)

只是换了登录账号而已
tennatId都没变

>看看编码规则的定义

有两个重名的影响嘛
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200219102258424-380635495.png)

>这哪里重名了，一个点 一个_
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200219102320535-479461565.png)

这是编码规则的定义
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200219102343339-478946819.png)
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200219102348843-1982004868.png)

>哦哦  不过我还是没明白你换个用户就找不到编码规则 这个问题  确定是同一个租户么
>这是租户级的编码规则吧  确定是一样的么 看看缓存中的fail-fast里边编码的key



### 请问 Oauth 服务在访问时出现以下错误有大佬遇到过么？
```
org.opensaml.saml2.metadata.provider.MetadataProviderException: org.opensaml.saml2.metadata.provider.MetadataProviderException: Error filtering metadata from http://haasgz.hand-china.com:34990/demo-public/0/92cc563e47ea4b24a2f7d05d0cddaa09@federationmetadata.xml
	at org.opensaml.saml2.metadata.provider.AbstractReloadingMetadataProvider.refresh(AbstractReloadingMetadataProvider.java:267) ~[opensaml-2.6.1.jar!/:na]
	at org.opensaml.saml2.metadata.provider.AbstractReloadingMetadataProvider.doInitialization(AbstractReloadingMetadataProvider.java:236) ~[opensaml-2.6.1.jar!/:na]
	at org.opensaml.saml2.metadata.provider.AbstractMetadataProvider.initialize(AbstractMetadataProvider.java:407) ~[opensaml-2.6.1.jar!/:na]
	at org.springframework.security.saml.metadata.ExtendedMetadataDelegate.initialize(ExtendedMetadataDelegate.java:167) ~[spring-security-saml2-core-1.0.3.RELEASE.jar!/:1.0.3.RELEASE]
	at org.springframework.security.saml.metadata.MetadataManager.initializeProvider(MetadataManager.java:412) [spring-security-saml2-core-1.0.3.RELEASE.jar!/:1.0.3.RELEASE]
```
跟证书有关系？

org.opensaml.saml2.metadata.provider.MetadataProviderException: No IDP was configured, please update included metadata with at least one IDP

![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200219102446783-1668448482.png)


