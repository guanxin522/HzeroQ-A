### 新搭建的文件服务报错，是什么地方没有配置对吗
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103154813937-1911405659.png)

>你的存储配置配了吗



### hzero 获取当前用户 一直是空, iam_user中登陆的用户正确 也是空

![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103154749333-116976615.png)

>参考下这个
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103154954556-1699825845.png)

但是我们服务上已经加上了 这个 

这个问题是这几天 才出现 的  之前都没问题




### hzero前端点击具体外链菜单的时候,响应头中
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103155127415-841586898.png)

导致嵌入不了iframe，请问如何解决


###  请问下前端大佬 这个会是啥情况？
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103155155376-1702629350.png)


### 请帮忙看下这里传的tenantId为什么空  版本是1.1的
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103155204600-1761949238.png)

http://midapi.ansteel.cn/hitf/v1/client-auths/2?tenantId=null


>好的


### Hzero后端1.1版本中启动admin服务时报了图1的错误，然后我把这条数据删了重新跑，报了图2的错误

图二
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103155315885-1895126847.png)


>第二个报错不影响

好的，谢谢



### 这个错是怎么回事呢？开发环境直接可以用，测试环境就是报这个错，看日志也没报错。
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103155415101-386609610.png)

>网关没有错误日志？


![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103155437004-393101713.png)

开发环境又可以额 没报错
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103155510957-1399877830.png)

>这个异常是网关抛出来的

那怎么修复呢，按理说开发环境都可以调用了，是哪里少什么东西了吗

>这个异常是网关抛出来的 所以肯定是在网关有异常信息的 这个一般是网关到服务的网络不通

好的我再试试，好像发现了个问题


### 请问下升级1.1.0之后swagger上的服务信息变更undefine需要怎么处理一下
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103160326115-1079025009.png)

>检查下路由表 是不是路由名重复或者path重复

没有呀 这张表都是新初始化的数据 之前那个库废弃了呀

>看下这个请求
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103160414376-2122206802.png)

ok，找到原因了 谢谢



### 请教个图形验证码的问题

这样配置登录的时候没有显示
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103160441697-1193045256.png)

>是个bug，这周发小版本会修复


### 有哪位大佬帮忙看下，这个导入的时候一直报错这种信息 
```
import/data?batch=GOMT.SALES_RELATION_IMPORT-1012497109&page=0&sheetIndex=0&size=10&templateCode=GOMT.SALES_RELATION_IMPORT
```

批次信息是传了的

>你这里怎么配置的
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103160603822-567160023.png)

是自己的服务里面的这个配置吗

>是的

还要加一个你这样的路径扫描不
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103160625137-1744093387.png)

>是的 我们的xml文件你没扫描到

加上去就好了，谢谢啦




### 升级1.1.0 后saga消费端报异常，这是什么问题啊io.choerodon.asgard.common.AbstractAsgardConsumer#AbstractAsgardConsumer
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103160840892-198332526.png)
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103160846116-79421594.png)

>私聊你

好


### 升级1.1之后前端改了webSocket配置，然后报了400是什么问题呢？
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103160918899-1283350774.png)

>私聊吧


### 单据维度页面404，该怎么排查问题呢？
>前端版本是不是太低了
1.1.0

刚才我在配置，刷新后就404了，单据权限页面是可以打开的

>这个前端版本应该有问题 样式都不对
刚才前端发布了，我看一下

前端把版本降回去了，我的问题

>ok



### 请问HZERO有没有部署在windows service上的案例或者教程之类的？

>理论上应该也是可以部署的，有jdk和docker应该就能把大部分的东西都跑起来

>之前我们有项目做过，没有用docker，直接部署也可以，这个就和你自己本地启动，原理一样，理论上和部署Linux系统没多大区别

好的，谢谢


### 请问下怎么获取当前语言环境 zh_CN或其他  直接用这个可以吗
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103161116605-1287570078.png)

>可以

ok



### 请问到哪里设置 X-Frame-Options 的属性
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103161159928-415620059.png)



### 这个websocket问题有什么进展吗？这边时灵时不灵，看日志就是报空指针了
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103161219878-2111215810.png)
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103161317609-764628350.png)

>私聊吧



### 升级1.1之后，HZERO-ADMIN服务经常会挂掉


### 请问  我想将 单点登陆全部拦截到一个sso服务器应该怎么配置呢，现在用户 仅ip可以直接拦截跳转到单点系统，但是一旦在 ip后面增加了其他的路由 就无法拦截到单点系统了


### 1.1.0.RELEASE 的数据库初始化里面这个消息还是没有 
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103161543546-1619596772.png)

我记得很早之前就出现这个问题了，一直带到 1.1.0 版了？


>在多语言有个刷新缓存的按钮  这个是缓存的问题
>或者你重新编辑保存下即可

后者可以，刷新缓存的那个按钮没有效果


### 请问本地启动跑到这里就停了，是啥原因？启动其它服务是正常的
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103162044732-1209431284.png)
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103162110828-1855071551.png)

![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103162134490-2111585532.png)

```
Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'woopOperationController.v1': Unsatisfied dependency expressed through field 'woopOperationService'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'woopOperationServiceImpl': Unsatisfied dependency expressed through field 'halmApfmFeignClient'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.hzero.halm.mtc.feign.HalmApfmFeignClient': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: PathVariable annotation was empty on param 0.
```

>'woopOperationController.v1':  ...PathVariable annotation was empty on param 0.这不是你们自己的代码么？

![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103162227588-762214229.png)


### 子账户界面的权限导入下载模板下载不了，这个是需要我们定义模板上传的吗？
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103165312119-743604272.png)

>还是有什么问题
点了没反应

>看看控制台呗
稍等一下，排查下其他问题
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103165449102-1175529766.png)

>私聊吧



### 大神们，hzero平台有“地图/GIS定位”之类相关的组件或服务什么的吗
>目前没有呢，是什么应用场景呢

前端需要展示一个地图，有定位点可以移动，输入地址返回坐标，可以保存地址之类的


>好的，暂时没有哈，你们可以先做着，后面我们再看怎么提炼通用的能力
嗯


### 请问文件上传的时候报这个错误是什么原因呢
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103165536586-835159415.png)

>存储配置都是OK的吗

您说的存储配置是minio吗，我启动了这个的

>启动了，还要检查一下文件服务里的存储配置，要对应配置好
好的，


### 这个多语言关闭查询的能支持一下查询的方法吗，有时候查询也需要关闭多语言的查询 
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103165337344-576998755.png)


### 请问通用导入，新建列里面的 示例数据导出模板的时候怎样才能换行
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103165630035-84765787.png)

>我试一下把


### 大佬们，请问下什么情况下，站内消息的铃铛会隐藏？
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103165657499-627691570.png)

>你们没有配置websocket地址吧

websocket地址是消息服务的地址吗？

>类似：ws://hzeronb.saas.hand-china.com/hpfm/websocket  前端有个环境变量：WEBSOCKET_HOST
>hzeronb.saas.hand-china.com 即网关的地址


### 请教一下，transfer中这个配置是干啥呢？？怎么配置呢？
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103165748206-797436992.png)

>配置RocketMQ NameServer地址的

还有这个呢
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103165813272-2029654878.png)

>这个是HExl组件的配置吧，看看是啥含义？



### 请问大佬们，工作流中的自定义跳转条件返回值是布尔类型吗？？
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103165933530-1185792050.png)

>是


### 请问这个前端登录的logo  如果需要替换是，不是需要在auth服务下用相同的路径替换
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103170000447-581281232.png)

>1.1可以配置  系统配置功能里面



### 如果用站内信，就一定得把message服务的端口暴露出来吗

>可以不需要，只是基于websocket即时提醒就没法用，1.1可以走网关，就不需要单独暴露了


### 请问对于将hap重构为hzero，有什么可以解决条件查询的时候，某些字段需要跨库查询的问题呢
初始化项目，1.1 op 版本，platform服务：
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103170055396-845940242.png)

>好 我们检查一下

>我检查没发现有问题的数据，你要不更新？
我今天下午刚拉去的

>报错的上一行数据之后就没有数据了
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103170218489-397545814.png)


要不然执行一下试试？我真的啥都没改，跑到这里就挂了


### 各位大佬，通过feign调用iam服务这个接口，状态码返回200，但是用户信息未创建，请问什么条件会出现这种情况
>200响应内容是什么

稍等，我用字符串接收下看下是什么内容

```
{"failed":true,"code":"error.error","message":"程序出现错误，请联系管理员","type":"warn"}
```

>看一下iam的日志

貌似是因为这个  存在两个一样的role_code

![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103170233782-1367103385.png)
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103170238471-849063387.png)


>这里是有点问题 我们修复下

好的，那我先删一条重复的吧

>嗯



### 安全策略点击保存给提示，哪位知道怎么处理
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103170340607-466343265.png)

>要手动向 oauth_password_policy 添加一条这个租户的数据

再问一下这个入口在哪里，没找见

>表里加 你这个租户怎么创建的

租户维护那里新建的

>再试试，应该是历史数据问题，我处理了

好的
还是不行
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103170438761-181636605.png)

>哪个环境？

这个
http://saas.onecontract-test.hand-china.com:30001/cchg/change-list/list

你们自己的环境吧，

>用这个SQL修复下数据

```
INSERT INTO oauth_password_policy ( CODE, NAME, organization_id ) SELECT
tenant_num,
tenant_name,
tenant_id 
FROM
hpfm_tenant 
WHERE
tenant_id NOT IN ( SELECT organization_id FROM oauth_password_policy )
```

好的，试试去
可以了，谢谢



### 请问自己创建的模板，然后从客户端进行数据导入的时候，选择数据上传一直报503，系统自动的导入模板就可以数据上传
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103170730784-2031695514.png)

>/ hpfm

明白了  多谢

>客户端路由写的不对

数据上传、验证、导入都没报错，但是数据没导入进去
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103170959665-821562225.png)

>什么版本

import 1.0.1.RELEASE

还有这里怎么保存不了
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103171038214-99404927.png)



### 请教一下，1.0版本登录页面的背景图片该如何替换
>参考
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103171101156-1003066920.png)


### 麻烦问一下，0.9.0的工作流跳转条件中配的数值常量是Long类型的嘛，我们单据的金额类型是BigDecimal，发起工作流有报错：javax.el.ELException: Cannot coerce '100.1' of class java.lang.String to class java.lang.Long (incompatible value)
>这是执行表达式报错？ 参数怎么写的  
>参数类型指定double试试

我换成double试一下先


### 请问前端打包 报这个错 是什么问题呢
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103172041504-1383886581.png)

>依赖没装上
 
应该要怎么装呢


### 请问一下hzero-front-cli创建的项目启动出现如下错误，该如何解决呢？
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103172119984-1184885502.png)


### 请问这里配置了加数据前缀的规则，当使用平台自带的insert方法对这个表插入数据的时候是不会拼上数据库前缀的吗
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103172142760-1102599416.png)

>数据权限只支持查询

清楚了~


### 各位，本地服务注册不到注册中心，没有报错，日志打印registration status 204，请问是什么问题
>具体信息呢

这个
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103172331696-1083984249.png)


>在启动类加上try catch 把异常信息打印出来

Failed to execute CommandLineRunner

>看下你的启动类

这个
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103172549414-1138115120.png)


>exception改成throable
 加了还是一样的报错
 
>信息呢  截图



### 你们谁有最新版本的数据库初始化的groovy么？？
>可以在hzero-resource项目上拉 https://code.choerodon.com.cn/hzero-hzero/hzero-resource



### 启动 interface 时候 报了这个 版本是 1.0.6的 ，其他基础模块启动没有问题
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103172313125-1625455876.png)


>你是怎么启动的，我从来没遇到过这个问题

我是按照模块一个一个启动的   interface 是最后一个启动  
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103172819242-955094194.png)

>你刷新一下依赖，还不行的话，打开控制台 maven clean spring-boot:run 运行一下试试
好




### 我们现在通用导入是基于单条数据进行校验的，但是我们现在业务上需要考虑10W+的数据导入（比如期初库存数据导入），对于这种情况使用现在的校验模式会比较慢，现在有什么比较好的解决方案吗？

>可以批量校验啊 文档里边应该有介绍


现在看文档，可以批量导入，但是校验的时候要逐条校验
除了这里还有其它什么地方有介绍吗？
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103173000175-1281587502.png)

>不好意思  刚确认了  导入校验不支持批量校验   导入支持批量 自定义的校验规则很复杂么 


复杂的校验可以不在导入的时候进行校验，但是一些基础校验数据的数据量会很大。比如说库存导入的时候，需要校验物料、批次、货位这些业务数据，但是这每一种数据单表数据量就可能有十几万甚至几十万。

>自定义校验逻辑，应该是只校验数据正确性，业务逻辑的校验，还是在导入那一步自己处理吧。

是的，我说的校验物料 批次 货位这些就是在校验数据的正确性，因为我们是要生成库存数据，
物料批次这些数据就是在系统中存在对于我们来说才是正确数据，否则根本不应该允许进行导入，
要报错提示到具体行并且允许用户进行更改。



### 请问文件上传服务报这个错是什么原因呢
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103173228884-1795705525.png)

>什么版本
1.0.1 配的是本地存储

>私聊吧



### 能帮忙复制一个邮箱设置的密码嘛？Lkk123456 用的以前版本的产品密码生成之后会有问题
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103173327051-1662974462.png)



### 请问下这个组件后续平台会考虑优化下这个组件的位置吗
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103173412999-2141981159.png)

> https://www.bt.cn/bbs/thread-22917-1-1.html

>配置这个属性
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103173534715-2146223052.png)

### 这个tooltip跟popconfirm组件我们遇到了两个问题：1.如果父元素在含有滚动条的容器内，toolitip还是会显示出来2.容器滚动，父元素位置变了，tooltip位置没有变动。这两个可以修改或者优化一下不？
tooltip和popconfirm 这2个组件

![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103173451436-669160976.png)

>配置这个属性
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103173534715-2146223052.png)

好的


### 请问 我前端用 nginx做了负载后 出现跨域的问题 应该怎么解决呢
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103173050521-1955830371.png)

>最简单的方式就是把后端也载上
后端也载着的 用同一个nginx分别做了前后端的负载




### 请问导出组件导出的数据库文件怎么可以自定义文件名呢
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103172401355-917456487.png)



### 请教一下大佬们，1.0.0 调度平台的执行器管理 首次启动服务可以正常自动注册，但是服务重新部署后，状态变更为自动下线，无法自动注册。这是什么原因呢？
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103171131134-1024153478.png)

>私聊吧
好的


### 请问HZERO如果不借助K8S或者猪齿鱼, 可以从自身的架构实现灰度发布吗？


### 新服务报这个错误
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103154838774-1241824193.png)



### 新拉的服务为什么选上所有的组件之后启动会报错
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103154858436-950226237.png)

>报错是什么



### 调度平台的简单配置，是不是只需要配置执行器和调度任务，然后指定好job Handeler就可以了  配置了一个好像没有起作用

> 要依赖调度客户端开发的


### 数据权限不起作用怎么办  在sql里关联了这张表
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103173625439-708431535.png)

有这样一个数据权限
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103173634693-1254655779.png)

可使依然没有吧前缀拼接上去

>参考文档
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103173803633-1317331009.png)




### 请问通过 org.hzero.boot.platform.code.builder.CodeRuleBuilder调平台服务的编码规则报错
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103173742380-824555942.png)
需要的参数都设置了

>错误内容看一下啊  你截图这啥都看不出来

这个
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103173836712-1886214608.png)

>你是不是客户端和服务端版本不匹配

codeRuleBuilder.generateCode(tanentId, Constants.RuleCode.RULE_GROUP_CODE, Constants.RuleCode.GLOBAL_LEVEL, "GLOBAL", null);

>检查boot-platform和hzerp-platform的版本是不是不一致

pom里只明确指定了
```
<parent>
    <groupId>org.hzero</groupId>
    <artifactId>hzero-parent</artifactId>
    <version>1.0.6.RELEASE</version>
</parent>
```

>你平台服务什么版本


其他地方没有控制版本
```
<!--平台服务-->
<dependency>
    <groupId>org.hzero.boot</groupId>
    <artifactId>hzero-boot-platform</artifactId>
</dependency>
```

>你平台服务是不是 1.1的 ？

我改到1.1试试。

>你要看你平台服务什么版本啊  一般来说保证parent版本一致就不会有问题

融合开发环境的，这个后端的parent忘记改了
现在ok了


### 数据初始化失败，有大佬遇到过吗
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103174207640-1727625820.png)

>你把报错的这个excel发出来看看

这个日志会输出成表格吗，我只在git命令行看见日志输出呢。。。

>我说的是初始化数据的这个excel

嗯

>日志往上截一两行我看看

这个
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103174254834-2027783535.png)

>好的  我们的问题  我们马上更新一下

>已经修复了  拉一下最新的excel就好了

hzero_governance 这个数据库那个初始化脚本里好像没有相关的文件

> 好了 在拉一下试试  这个数据库不用了


哦 那我swagger启动报错欸
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103174919760-1193442640.png)

>修改下数据源 用hzero_admin这个库

看着是好了


### 验证token的时候报这个错 
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103174941670-196470442.png)

这些不是hzero 校验通知的吗

>这个报错好像是找不到字段？

>先自己调试找一下问题吧  我觉得跟我们可能没关系



### 在组织架构的业务实体里加字段可行吗
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103175039365-1851190668.png)

>可以反馈给我们，如果通用的，我们也可以加进去哈


### 独立值集， 可以配视图吗？
>可以

有没有参考？ 有没有参考视图

>就正常配，meaning和value

解决  

>OK

列宽的单位是多少？  
是不是显示在标题会好点

>好的，我们优化下，页面的长宽通常单位都是像素(px)，这个后面我们加到标题上

好


### 大佬们 ，新建的服务 在注册中心已经有了 但是在swager上  看不到 ，swager 的文档刷新也试过了
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103174654756-256000341.png)
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103174703789-238236717.png)



### 请问 我想在 gateway 增加一个 filter应该怎么处理
现在前后端做负载均衡部署 出现了跨域问题 不知道改如何解决
