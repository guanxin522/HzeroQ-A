### 请教一个问题，我们项目尝试把微信子应用和hzero2个前端放到一个域名下访问，昨天我问了一下前端的大佬，让我把hzero前端放到自命名的path下了，但是这样之后我的后端服务访问不到了，请问应该怎么修改后端的path？
>你的意思是http://xxxx/hzero这种模式吗？



### 这个子应用怎么添加不了
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306102434737-43199784.png)
还有用模拟器打开，这里面看不到添加到的子应用
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306102449378-13407038.png)

>你这个版本只能添加在线应用，离线应用需要升级到0.8.0 https://docsportal.hips.hand-china.com/zh/docs/release-notes/changelog_v0.8.0/
>用新建的租户去添加子应用，详情看文档的操作手册  https://docsportal.hips.hand-china.com/zh/docs/user-guide/corporation/



### 请问下数据导出能设置同级的多sheet页么  我需要把两个不同list的数据，放在同个excel的两个sheet页中

>标准的目前支持头行结构的导出，不支持同级的 ，你可以自定义导出样式



### http://hzerodevf.saas.hand-china.com这个环境，不用了吗？

>这是个前端，产品都是自己的前端开发

嗯，我知道，有些问题，我可能会用到融合前端来测试重现。
标准的

>你们现在还在这个平台下开发产品吗

没有了

>好，我们看看

好的

>前端恢复了

好的，谢谢



### 项目现在在给客户做交接，然后客户方面要求我们提供所有表结构的详细说明，每个字段都需要有字段注释，我们项目上定制开发的表结构都已经交接完了，然后现在卡在框架标准表这一块儿了，我们项目用的1.0版本的框架，初始化框架表的时候里面有很多字段都没有注释，我们项目上能看懂的都补充了，但是还有不少实在没法补充的，这部分希望显智哥能给个建议或者提供点帮助

>把没有的发出来看看，我们自己建的都是用的，但是工作流activiti和quartz这种是开源组件的，这种就要找官方文档了
>你直接发我好了，我们看看差哪些

嗯嗯 好的  多谢


### 项目上的业务同事针对导入提的建议。

导入建议.docx

你看看呗。  版本0.11


### 这个账号下面没有流程部署 ， 要在哪里配置一下权限呢 ？ 
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306103406514-1119722190.png)

>你可以复制一个或者新建一个流程，上面的是平台定义的流程

租户不能使用平台的流程么 ？

>只有查看的权限

用不了，里面的岗位啥都对不上



### 请问接口平台不支持多个AccessTokenHeader吗？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306103155784-1755090318.png)

如果需要在Header中加多个自定义参数应该怎么使用



### 有大佬遇到过在猪齿鱼里面配置的环境变量，获取之后转成科学计数法了？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306103504363-2094096058.png)

>用字符串呢？加引号


### 请教一下，h0的数据导出组件中注解使用了多语言的标题，但是redis存的是租户的多语言而代码中没看到有拼接租户id导致多语言获取失败
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306103519509-229911715.png)
这个问题应该怎么解决呢

我这边暂时覆盖了框架的源码了
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306103542524-1660107145.png)

>确实有这个问题 我们尽快修复




### 请问值集转换 支持SQL值集吗  还是哪里写的错误
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306103730525-1974677093.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306103742172-1555905860.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306103751783-253455765.png)

>不支持
>SQL值集没法缓存，根据字段一个一个去执行SQL检索，存在跨库等一些列问题，性能会非常差，这种需要自己关联SQL去取

在只有SQL值集 有其他的方法 可以转换吗

好的



### 请问一下， 如果无域名，要怎么部署Minio呢？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306103830766-1346321884.png)

>那k8s应该是没有用到ingress吧，如果没有的话应该可以把ingress节点配置去掉。通过svc的方式暴露出去之后就可以通过ip加端口访问了 默认好像是9000端口

好得，多谢


### 报表导出 这个重新的方法是干啥的
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306103903739-963430500.png)


### 有人知道在通用导入的时候怎么区分sheet1，sheet2吗
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306103923815-33579933.png)

方法传进的是Date

>这个
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306104005010-1734121528.png)

没找到哎
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306104027172-803150330.png)


![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306104047198-345171520.png)

>这是导入的注解，注解有sheetIndex参数
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306104117382-516707950.png)

这样用吗
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306104142932-205370680.png)

>嗯



### 想请问一下，直接访问hzero前端，目前框架会上请求self接口判断用户是否登录进行页面跳转；现在需要实现单点登录，后端已经改造会在self接口后拼上参数供标识是否单点进入页面，前端需要在哪个位置修改？

>你们这个是要做啥，为啥还要区分是不是单点进来的呢

因为带单点标识的用户，后台已经生成了token，相当于已经做了一次登录，就不需要再登录一次直接进到具体页面

目前会通过self接口调用结果就重新跳回登录页面，现在想在这里加一个判断
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306104235117-898757064.png)

>单点登录后不需要再登录呀，这个是你们没有弄好，单点登录的目的就是不用再次登录
>你们单点登录是怎么配置的？用哪一种单点登录平台？这个理论上配置好了，用起来是不需要项目自己去特殊处理的

现在需要定制化self接口调用后401之后的逻辑，这块逻辑如果要重写需要在哪改动？

>好吧，这个去前端群问问吧，我只是觉得不需要有改动才对，单点登录实施的项目多了，没有遇到改这个的

好的谢谢



### 请问 工作流 抄送人 这里选了岗位后还是显示空的是啥问题呢？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306104302098-665906047.png)


### 请问有人遇到过这样的问题吗
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306104336996-1537892593.png)

### 大佬，麻烦问一下，在域名配置，配置了cas单点登陆之后，没有重定向什么原因？

>看日志 先把配置拿出来看看

这个
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306104534297-462777506.png)

>oauth的配置也发出来


这个
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306104552098-513910985.png)

通过访问单点登陆域名，直接跳转至我们系统的登陆了
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306104611975-146374558.png)

>什么版本，感觉是没有拦截到

是1.2.0
我们另外一个环境也是1.2.0，是可以重定向的

>看看oauth服务的日志
>你监控下，访问的时候，看打的什么日志，另外日志级别调低点

好的

>另外有个配置是配置协议的，要用https

没有拦截到
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306104704279-2044250843.png)

>他那个cas的访问路径感觉是没有被拦截到，你帮他分析下吧

好的


### 大佬们，有没有项目做过工作流里边设置监听器，里边有取当前节点审批人的？这个应该怎么实现呢？
大佬们，有没有项目做过工作流里边设置监听器，里边有取当前节点审批人的？这个应该怎么实现呢？
之前用的是activitiService.processInstanceForecast里边取Set<Employee>，但是对于并行节点的时候，会取到所有人
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306104955866-575043418.png)
，这个要怎么获取这个对象，有人能指导一下吗？或者有项目做过的借鉴一下呗

>这方法返回就是审批人的员工编码，有什么问题么
>你监听器怎么定义的
>不是实现 TaskListener接口么  这个就是实现的方法啊

监听是自己写的，有可能写的不太对，有没有参考一下的写法呢？
之前用的是activitiService.processInstanceForecast里边取Set<Employee>

>参考这个  org.hzero.workflow.core.listener.ApproveRejectNotificationListener

我看了  明白啥意思了
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306125518931-461837425.png)

不过，这个监听器的class，只能导出来改，再导入回去吗？

>好

几百个流程，每个流程的一些节点需要单独的，别的用系统自带的就可以，这个。。。咱们hzero以后可以在界面上就修改监听的class吗？

>你看的这个只是一个入口类啊，我们的监听器本来就是在页面上配的

那我新增了一个这样的listener之后，不是得在文件里边改入口类吗？

>不是  org.hzero.workflow.core.custom.parser.CustomUserTaskParseHandler#executeParse
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306125654385-2138972153.png)

>参考这部分代码  可以直接覆盖这个类 或者注入ActivitiConfig然后添加一个新的handler

好的，我先看看

还有同样的流程配置，有些时候正常，有些时候异常报500


### 附件这里点删除，附件就直接删掉了吗，再查就没有了？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306125730446-390820543.png)

>是的

那我后端怎么知道这个附件是否还在，调用接口查询一遍吗？

>啥意思，这个是同步删掉文件存储服务的附件呀，和后端有什么关系，你的意思是更新的时候删掉，然后没有保存，后端不知道还在不在？

对  我这边要验证附件是否存在。

>确实这是个问题，目前方案可能暂时就只有调用接口判断了，是有这种接口的，后面我看能不能优化下，可以配置，是否是软删除，只打删除标记，不真正删除。之前删除是因为考虑到，如果不删会有很多垃圾数据和文件。
>但是前端操作又是不可控的，文件的操作和功能的操作会分开，没法做到一致性，特别是那种单据里保存文件路径那种情况

这个实现起来确实要考虑比较多的因素。
前端有属性控制它不允许删除吗

>onRemove覆盖平台的remove方法
>传个e=>e之类的就不会调用删除接口了

哦哦。


 
### 请问注册到swagger的本地服务。我本地的接口有些能访问，有些不能报连接超时
 
 
### 麻烦问下，现在通过流程变量传递的审批人都要用审批规则才能实现嘛？之前的版本可以在页面选择审批规则那里就可以选择流程变量 并且不用调接口获取员工号


### 有没有人遇到过Seata一个分支回滚失败，然后一直重试，日志一直刷重试日志 


### 实体对象中的LIST对象中的实体对象的LOV meaning能通过这个注解（@ProcessLovValue(targetField = BaseConstants.FIELD_BODY) ）取出来吗？

>可以
 
怎么做哦 

>http://hzerodoc.saas.hand-china.com/zh/docs/service/platform/lov/
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306125620670-1609677333.png)



### 请问下平台里面的分布式事务怎么实现，比如feign调用一个接口，调用后希望能让这个接口内部的事务回滚

>要回滚，写补偿方法


### 请教一个问题啊，就是我要导入三张表，第一张表主键是第二张表的外键，第二张表的主键是第三张表的外键，怎么可以做到批量导入呢？

>这个思路就是要自己程序去拆出来对应关系，比如你用三个sheet页导入，插入到数据库的第一个数据返回的ID，组装到第二个sheet里，插入返回的ID，组装到第三个sheet，核心问题是每个sheet的数据要有关系，不然就知不道那个对应哪个。或者用一个sheet导入，打平，自己在程序里stream做分组，分成三个层次的数据，循环一个一个从顶层往下处理。



### Hzero1.2.0这两个接口指定参数identities出现如下错误,
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306104737622-1161532917.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306104742551-1639686556.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306104751723-1933449010.png)

Hzero1.2.0当值集为SQL值集时，DefaultLovValueHandle处理时，这里参数名应该是organizationId
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306104811091-112079136.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306104815623-576380403.png)

>你们是自己写了翻译的SQL吗?这个错很明显呀

没有自己写，就是平台的代码

>翻译功能，只有独立值集，是基于标准功能可以直接转换，其他的需要自己的翻译的SQL   标准功能都没有写过
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306104845684-1647295086.png)

>你可以找一下这个值集看看

这个接口没用用到translation_sql字段
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306105127239-1372494723.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306105132226-184726828.png)


>那就不纠结了，现在那个取meaning的是用于独立值集，其他的自己写SQL好了
>非常不建议用来处理翻译的问题，还是性能太差。如果没有维护，刚那个IN ()条件怎么来的呢，我都没有看到SQL里有这个查询条件

嗯，明白，只是在看这个值集翻译的注解代码的时候，里面有写到IDP和SQL的值集翻译功能，所以就尝试去翻译了一下，然后出现上上述的问题。
然后IN()里面的条件是通过请求参数放进去了，这部分代码没有改过。



### 工作流程点 审批通过 结果是 审批通过，有些点审批通过 结果是审批拒绝 。调查下来是由于账号的角色变了之后(平台级—》变成租户级后)前端缓存还在存在   。
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306105303836-1577247332.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306105308486-349366224.png)

>前端缓存和这个有什么关系

根本原因没有代码我看不到。因为原来的流程配在平台级上有，角色变了之后(平台级—》变成租户级后)，我再租户下面也配了一个，我在无痕模式上测试是好的。目前猜测是缓存原因。


### hzero 的 websocket地址是多少呀

>你这个问题问得，不同环境不一样，怎么知道你的地址呢

不会根据host 来嘛

>现在我们前端有个消息服务有用到，你是想知道这个地址吗

嗯是的 

>是同一个租户么  你这个租户是平台的租户么
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306105520410-105490710.png)



### 基础服务启动时，连接8.0的mysql报这个错误有啥解决办法么？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306125921602-1463919083.png)

>一些通用的问题，先自己google、bing、baidu
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306125933159-1416163792.png)

试过了不行才问的 加了这个参数还是同样的报错

>改MySQL的密码加密配置，重启MySQL

好的  

>8.0版本的驱动好像还没有

不行我就降级了

>8.0不行的，别用那么新的版本，驱动不兼容

嗯嗯。好的

>default_authentication_plugin=mysql_native_password

基本都是修改这两个配置
