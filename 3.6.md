### 工作流修改的时候回改了名称，部署之后出现重复值，导致发布启动的时重复
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306092759785-1241023721.png)

>好的  这个我们处理一下

  您好，这个有结果了么 ？

>这个我们预计在1.2.2修复



### 请问下，我们调用FileClient上传大文件(比如100M)，由于这里设置的超时时间设置比较短导致报超时，针对这种情况，怎么修改配置？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306215111264-84383669.png)



### 请问下 关于工作流这块 无法选择抄送人的问题应该咋解决  有哪位大佬可以看下么
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306215124165-72274715.png)

>选择岗位之后这里不显示？

嗯嗯 是的
在审批规则选择了就显示


### 请问工作流可以在流程中给变量赋值么？

>可以   监听器可以返回ServiceResult对象，可以操作流程变量，这个类再boot-workflow-plus


### 请问截图中文件上传后保存，刷新后没有了是什么原因啊？  文件Minio存储也配置了读写

>你自己的业务逻辑是不是没存文件呐

你意思是Minio要存储，本地数据库也要存储一分吗

>上传返回的url，你自己要存起来的呀

好的  那我检查下代码，谢谢



### 请问初始化前权限组件的时候,报hiam_ui_api表不存在, 这个表是需要自己建的吗?
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306215256210-1783300102.png)



### 请问这个回调地址是在哪里可以配置的吗？我们项目上的oauth地址是https的，而且域名带端口，我测试无法回调成功
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306215309781-1472908044.png)

>申请三方应用的时候会用到回调地址



### 大佬，请问工作流里边自定义审批规则的时候，自定义的方法，返回值应该是员工号还是员工对象还是别的什么呢？

>员工编码的数组

List<String>这样的吗？

>嗯



### 请问下，设置Hzero的基准时区是在那块代码设置的？目前hzero的基准时区是GMT+8，我这边需要做下修改

>这个是和用户有关，可以在个人中心配置，新建用户也可以指定默认的，如果要批量修改已有用户，那就在数据库用户表调整下好了

用户那边的是目标时区，我想问下的是来源时区
例如，外围系统系统传了时间给我，我们进行序列化的时候，回先去找用户对应的时区，如果没有就按照默认的GMT+8来转，但是传进的时间的时区是多少呢？

>那就和数据库有关  和服务器有关

服务器对应时区是吧？

>如果是你这个场景，你应该让外围系统把时区也传给你，然后处理到数据库的时候，根据数据库的时区进行转换一下
>代码可以直接取服务器的时区，但是你要保证你应用服务器和数据库时区一样就可以了

好的，我研究下，谢谢


### 请问一下，工作流Plus换了个租户就会报错  俩个租户的所有工作流配置都一样（包括编码），一个可以，一个会报错

![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306215501673-475971508.png)



### 请问一下有没有0.11版本的数据库初始化脚本？宁德时代那边说去年给他们装的hzero0.11版本里边别的数据好像还行，权限集的数据都是空的，咱们这边有这样的脚本可以用吗？

>平台所有的脚本都在hzero-resource下，对应分支获取就行了



### 请问有没有遇到过工作流服务定义，调用一个接口，定义了2个参数，有一个参数，无论定义成常量还是变量，在接口里边都取不到值。【用swagger测试没问题】
请问工作流模块的接口定义测试可以正常的情况下，在流程里边，两个传入参数，只能接收到一个，有可能是什么原因呢？

>什么请求类型

Get  之前写错了用的POst，一个都取不到

>截图看看swagger

改成get之后，有一个传不进去

>两个参数接收形式一样？

参数都是String

![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306215550608-525929417.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306215554917-530350798.png)

>开一下工作流debug日志自己看看请求对不对

这个咋开？

>配置文件logger.level

就是我在流程启动的时候，就是
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306215718014-411393427.png)

>你不是字符串么，为啥又是个数组
>你给我看你代码中接口怎么写的

现在是在这里直接写了，想测试一下这个方案可行不可行

![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306215847486-1299527637.png)

>接口定义那边的测试也不行？

swagger，接口定义的测试都是正常的
就是放到节点的审批规则里边，就少了一个参数……

>在接口定义测试那边测一下

接口定义这边挺正常的

![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306215939571-929569419.png)
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306215946140-486043163.png)

>那你启动的时候怎么传参的？

一个常量，一个流程变量，
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306220018529-1584017700.png)

常量的那个试过改成流程变量，也是取不到
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306220026832-1399111114.png)

变量的就是定义一个变量，作为启动参数传进去，常量的就在服务定义里边设置了

我把日志改了也没有看到多出来的内容，我这个问题得怎么排查呢？

> 改了日志会打印请求的路径和参数 看看对不对

猪齿鱼部署的，我开了日志到debug，也不能看到路径和参数……




### 关于导入校验的问题：在使用Excel导入的校验功能时，批量数据中一旦出现有某条数据错误，则会连带一些正常数据被报错；同时，会导致一些错误数据被报“验证正确”。这些被“验证正确”的错误数据，在点击【数据导入】后，可导入后台表。
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306215608785-68240262.png)

发现个bug，提到问题平台了

>是的  把版本也写一下

0.11


>我看这个报错不是你程序校验出来的错误吗

看了，不是程序的问题。
是程序出的错，但是数据对错位置了
就是比如说这个是A数错了，但是存起来变成B错了。应该是框架线程安全的问题，

>好，那你把错误描述下，这个我们还得验证，感觉对应错误这个不太正常，按理说是一行一行处理，错误也是对应上的

看看这个类，感觉是这里的问题。

![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306215904103-1388434692.png)

>好的，我看看
>是有点问题，后面的版本有修复

我们现在怎么处理，直接在我们工程上覆盖吗？

>你们是不准备升级了对吧

准备升，但是没时候。客户这边在用。生产。
需要先修复下。

>那先覆盖吧的方式修复吧，1.0+的版本就没有这个问题了

相同的建立相同的包名，然后把1.0的代码拷过去就行了吗

>不一定，可能1.0加了新东西，我们给你提供个脚本就好

需要修复什么吗？


### 各位大佬有没有初始化iam_permission这张表的脚本呀



### 请问如果是用客户端模式进行接口调用，这时是否认为其请求的用户为匿名用户？然后他的服务调用链路还是跟原先一致？还跟这个图这样
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306215355112-217352621.png)

>一样的，客户端你可以认为和用户是一样的，匿名用户只是绑在客户端上，可用于处理创建人、更新人这些表字段

好的，谢谢



### 请问一下 三方认证上的open access token需要从哪里取？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306220201142-186984018.png)

>移动端三方认证首先会拉起本地app要求用户授权，用户授权后会返回一个令牌，然后用这个令牌获取我们系统的access_token

好我是需要在企业微信的自建应用的菜单下 通过URL的方式 直接访问hzero平台的海马汇子应用
这种情况下 还会有 你说的授权令牌嘛？
另 这里的open access token和企业微信的access token及bind接口上的access token是一样的嘛

>你这里是用子应用扫码授权访问hzero  还是不用二次认证就能访问？

不用二次认证，直接就从企业微信跳过去

>进入企业微信后，子应用首先要获取微信的 access_token，这个就是这里的 open_access_token，调oauth这个接口获取 hzero 的令牌，然后拼接到前端url后面就可以访问系统了
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306220641949-1665867123.png)

所以我可以认为在open bind里面他头上的access token和body里面的open access token是同样的值？



### 这个路由信息是啥时候写入到对应表里的？启动时？
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306220330598-667462973.png)

>可以看下调用链路去理解下   http://hzerodoc.saas.hand-china.com/zh/docs/installation-configuration/service-config/service-chain/

好的
1.2版本里面hzero-gateway-helper是不是被合并了？

>合到 gateway 里了



### 麻烦问一下 这个是什么原因
![](https://img2020.cnblogs.com/blog/1231979/202003/1231979-20200306220538024-1624011409.png)



