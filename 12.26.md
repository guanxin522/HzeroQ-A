### 请问下为什么我有一些JOB会显示客户端运行中 我后台代码是正常执行

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226141447175-551114235.png)

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226141543454-70863665.png)
返回完全正常

>服务什么版本

我现在的大版本是1.1.0   是不是我需要升级到1.1.2？

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226141609280-1869301493.png)
我看了  调度任务日志也没有报错

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226141718933-1180887587.png)


>服务端有这个配置嘛
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226141740613-899415069.png)

没有 这个是新增的吗
我升级的时候只是把POM.XML文件改了并没有修改这个

>是的
加这个可以解决我这个问题是吧 就修改这一个地方吗
还是还有其他地方》

>就这一个

没效果
是我截图这么改吧

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226141920451-845069546.png)

>是在hzero 下面

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226141940346-188044769.png)

OK了 谢谢大佬


### 请教下，为啥在客户端调用平台级接口时，角色集合全是null？ 
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226141847844-424215843.png)

>客户端分配角色了？
分配了
全给上了都不行

>分配的角色看看
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226142034347-52566916.png)

到gateway这儿的时候，啥角色都没了
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226142048306-639730228.png)

>突然出现的？
也不是吧，我今天刚开发了一个平台级接口测试就这样了
通过用户认证调用是可以的

>重新获取下 access_token 试试
还是一样

>获取 token 的时候看下 oauth 日志，会打印相关信息
好的


### 谁能教下我，这个接口关乎哪些表。

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226142142660-809568949.png)

>子账户？
有人碰了数据库

然后我新建子账户找不到角色。。SAAS

>这个查的是当前用户可分配的角色，跟角色管理处数据基本一致

有什么特殊表 ，不是role 或者iam 的吗

>角色管理下能不能查出来  iam_member_role 看是否有分配
看了，我再去研究研究

>你把 iam 中查询的sql拿出来执行下不就知道了

太长了。。不知道改了啥
我看看能不能还原。。

我没理解这块是啥意思。。。

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226142328542-1469799264.png)
 
>哪个版本的 数据重复？

1.0.2

每次点更多，就出一个新的奥乐齐管理员。。

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226142355803-1662689366.png)

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226142411203-301227877.png)

>你看角色管理呢，先不看树形这个
空的

>当前用户分配角色了没 重新登录下试试
分配了，重新登录还是一样。
算了， 我去导一份生产用户角色同步一下

>你把那个sql截个图我看看，你导出来估计也有问题，关联的表比较多



### 请问下，Mybatis的这个错误是为啥，要更新的表都在该服务下，SQL我放在navcat下跑过都没问题

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226142548805-749813491.png)

>mapper要继承 BaseMapper 并且要指定泛型

>另外单表更新的话通用的CRUD已经支持
BaseService吗

>Mapper 文件要继承 BaseMapper

我之前一直不继承basemapper都可以执行自己写的SQL

>查询可以  增删改不行

>单表操作不要去自己写SQL，而且是你这个SQL还很不规范，who字段，乐观锁啥的都没不处理

那个，如果我没有我要操作表的实体类，BaseMapper<T>里面的泛型应该写什么呢

>建一个实体类。。

>这个我们后续优化一下，不会再强依赖BaseMapper

>或者泛型写其他的实体类也行，只是可能会有点儿奇怪


### 我们这边没有通用导入服务和文件服务，所以客户这边要求把所有通用导入的按钮和上传文件的按钮 都去掉，这个只能覆盖前端页面吗？如果是这样的话，能提供下前端的源码吗？


### 请问一下，最新的代码生成器可以支持oracle了吗
>不支持


### 值集怎么改都不生效  请问是为什么 我甚至改成1了
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226142826922-548222599.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226142835772-750166530.png)

但是禁用掉的话值集视图那边立刻就有反应 后端版本是1.10

>你的意思是改了SQL 值集查询出来的数据没变么
对

>手动清空一下 hpfm:lov 下的缓存 然后再试试
好的


### groovy脚本通过changeSet删除表字段的非空约束，结果执行脚本报错，这个是什么原因啊？
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226142921772-1772065365.png)

>脚本写错了

这样写有问题吗？

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226142934190-859036271.png)

>这是全部么，报错应该还在上边 直接把文件发出来我看看吧

上面的我执行没问题，只是加了这部分报得错，好的


>前边的这部分空格应该是全角字符，你删掉重写一下就好了
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226143035551-1840152359.png)



### 请问下大佬们 1.1.1 OP 我在员工定义界面维护了对应的弹性域规则和模型，但是弹性域字段没存到数据库，看前端参数是传过去了
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226142955504-555237450.png)

>对应的弹性域模型编码是这个吗

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226143057053-2116347821.png)
  
这个
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226143118621-68513085.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226143132922-752481891.png)

我刚刚尝试把弹性域规则和模型都删除了， 重新配置了可以了。 


### 大佬，如果我要改hzero系统 自带的页面，怎么修改呢？
> 私聊



### 请问下大佬们，通用导入的列开启了数据验证，他的验证规则是从哪里获取的
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226143159694-408684558.png)
  
>看这个
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226143217851-810440483.png)




### HPFM.UNIT.DEPARTMENT 这个值集是不是有问题啊 这个必输的 否则查不到

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226143257796-1602859815.png)

>用的时候需要传这个参数

但是值集视图里面去没有传入这个参数 所以怎么查询都是空的
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226143324291-162841947.png)

预览是一定没有数据得到 因为没有传这个值是吧

>这个预览主要是看效果 用到的地方传

我如果获取当前界面的这个unit_company_id
前台可以获取到吗

>部门一定是在公司下的，这个你功能里有公司ID，在调用部门LOV的时候传给LOV就可以了 就是说需要先确认公司
那我需要先选择公司的LOV
前台self里面没有当前用户所在的公司ID
这就面临一个问题  我一个客户只有一个公司
我还需要让客户选择一下这一个 再选择部门？
还是我自己写一个值集吧

>你可以在写一个LOV 通过用户去关联出这些信息  self目前没有这个业务字段
我就是准备自己写的时候发现平台正好有

>self接口主要是放一下非业务字段，全局的东西，可以参考写一个就好了哈
>你写的时候可以直接，<bind name="userId" value="@io.choerodon.core.oauth.DetailsHelper@getUserDetails().getUserId()"/>，这样去拿ID，这样就不需要传用户ID过去了


### 请问一下大佬，这种页面能用hzero项目工程来做吗

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226143622126-1467012195.png)

13:43分


### 请教大佬，两个问题 1. 如图所示 文件格式如何添加 xlsx和docx 2. 目前调用已有接口文件上传成功后返回一个链接，可以改成一个vo实体(包括fileid name之类的信息)吗?
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226223112121-1826231312.png)

>添加类型，去维护下值集HFLE.FILE_FORMAT
好的

>文件上传返回的url，可以使用FileUtils.getFileName方法获取获取文件名
>再说你前端上传，前端就能拿到文件名为啥要后端返回呐

想拿到file id 存在另一个地方

>文件服务没有根据文件ID操作文件的方法，你要ID干嘛 存文件URL不行吗
也可以，其实都一样的

### 大佬，根据token获取用户信息的接口是哪一个

>看文档  http://hzerodoc.saas.hand-china.com/zh/docs/service/oauth/token/

好的，多谢


### 大家好，hzero通用导入目前是根据维护的列自动生成模板，请问支持上传自定义模板吗
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226223256587-118632524.png)

> 1.2会支持

好的，多谢

### 请问一下自定义报表的导出，D列可以指定格式吗，I列的乱码需要配置什么
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226223357612-1901871103.png)

>乱码你检查一下，数据源的配置   连接的时候，指定下编码

好的，D列数据的格式可以指定吗

>本身是什么格式

报表原来是数字类型的，数字太大就变成科学技术法了

>可以定义格式掩码   比如 #999,999,999,999
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226223854161-1126054637.png)

好的，谢谢

能够导出这种格式吗，强制指定转为文本

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226224101424-1891660645.png)

>那你SQL处理一下也可以的

好的，我试试


### 还有这一个csv没有了，前端是1.1.1版本的

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226224141809-706144437.png)

>什么类型的报表
简单类型

>复杂表格是没有csv格式，简单表格有

嗯嗯，怎么样才能出来，现在没有看到

>一直都没有吗？还是说升级到1.1.1没有的

升级到1.1.1后是有的，现在看不到了



### 请问这是为什么  会多出四条数据

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226224427431-975449418.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226224447468-357837561.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226224501545-2082233229.png)
后端返回正常  sql也正常
平台bug吗  还是前端的问题

>你检查一下接口是不是唯一字段有重复

>前端的表格一般都有一个唯一字段来当做key

这个表除了ID没有唯一键 是需要返回一个id来区分嘛
 不对  id也返回了

是不是后端手动分页玩脱了

>值集视图的值字段必须唯一，前端用这个字段做了key

用的SQL哦  不是调的接口

>把你的值集视图定义发出来看看
OK  懂了

记住了  值字段必须唯一


### 请问工作流流程表单添加了没有显示是为什么，在流程单据和流程定义中都加了

>要在审批节点关联流程表单


### 问一下，redis删除报错，有那个大佬知道是什么情况导致的不？

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226224238462-1383664239.png)

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226224300941-1839124314.png)

>你debug一下，感觉是删除hash结构的时候少了参数
我看看

>代码位置能发一下么

EmployeeUserServiceImpl  82行
hzero-platform 0.9.0版本
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226224347316-553303544.png)

>看看报错的时候哪个field是啥吧


### 通用导入的时候想调用编码规则，获取不到 ，请问有人知道么

![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226223914670-405640837.png)

>检查编码规则存不存在

有的
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226223944883-1630626001.png)

>编码规则有客户端的 不需要自己写远程调用

存在的
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226224037144-130893323.png)

>看文档
http://hzerodoc.saas.hand-china.com/zh/docs/service/platform/code/

### 请教个hzero_tool问题，为什么我自己写的 reference 都不生效呢
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226223434661-1435288988.png)
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226223449770-29803817.png)

>被引用的列加一个 .cited()

>这里
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226223546564-1179040233.png)

可以了


### 大佬，有没有一个接口，只传token，可以拿到当前用户和租户(我这里调用了http://192.168.17.15:8020/oauth/oauth/token 拿到的token)
>/self接口看一下   

self接口，swagger上没有吧，有文档吗

>看这个
![](https://img2018.cnblogs.com/blog/1231979/201912/1231979-20191226223733355-1720770726.png)


### 请问一下hzero支持NAS吗
>支持NAS挂载 与本地存储的处理方式一致

