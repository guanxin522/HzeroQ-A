### 各位大佬，docker部署HZERO的时候用的oracle数据库，一直报locale not recognized，这个是要修改docker的时区吗？
>把这个放到dockerfile里试试
>ENV JAVA_TOOL_OPTIONS -Dfile.encoding=UTF8 -Duser.language=zh -Duser.region=zh_CN -Duser.country=zh_CN



### 请教一个关于回滚的问题，就是我的方法报错了会触发回滚，当时如果方法内部调了另一个方法，那么调用的方法就没办法回滚了，有什么办法可以让调用的方法也回滚呢？，手动抛错的时候
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200227230335510-232087851.png)
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200227230341371-1892497039.png)
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200227230357577-1924668122.png)
，手动抛错的时候

>内部调用没法代理就走不了事务，要想走事务，调用就需要走代理，比如接口方式，也可以用我们封装的工具

>http://hzerodoc.saas.hand-china.com/zh/docs/development-component/support/
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200227230422428-1331115985.png)


### 移动端的h5的zip包怎么上传，需要上传到那个路径上，应用主页的配置要怎么配置
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200227230604242-1948678933.png)
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200227230623738-1291033143.png)

>这个问一下海马汇的人哈

>正常的hzero文件配置就可以，https://docsportal.hips.hand-china.com/zh/docs/user-guide/initalizationdata/，参考文档


### 请问流程定义编辑流程图打开是个空白的为什么，正式环境开始更新的时候
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200227230715462-1607634497.png)

>是不是后端地址配错了 看看控制台
>如果请求地址不对 检查工作流服务的配置

这样的
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228204147407-739638421.png)
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228204253755-1309511105.png)

>地址配错了吧  看看请求地址

![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228204441644-820413222.png)

>这个不用管  看其他的

![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228204459744-43387220.png)

>这是对的么
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228204512389-1377865316.png)

错的，嗯我让我们这边技术负责人弄下

>好

谢谢



### 请问下这个流程url后边的参数或者地址可以动态吗
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228204217336-539064977.png)

> 可以，可以用${流程变量名}

好的！谢谢


### 请问hzero-interface 后端要重写的话有没有源码？


### 各位大佬，最近我们系统频繁出现业务服务从注册中心中掉线，有哪些原因导致这样的情况出现。 目前通过排查貌似此服务有一堆异常出现

> 所有服务吗

个别服务
目前查看最近几天的错误日志，存在一些重复的异常信息， 是否会导致此服务直接挂掉

>是不是内存不够，建议JVM开大点，是不是有业务量大的时候，压跨了。网络连通性会抖动，另外下线后会恢复吗？还是就宕掉了，需要重启
>另外如果是生产环境，日志级别不要开太高

目前不会恢复正常，需要手动去重启才可以
同时生产环境伴随着 一些sql查询超时的现象

>那你先调整JVM大小，调整日子级别。SQL超时，是不是SQL太复杂，性能太差造成的，这个需要优化SQL，比如加索引，调整数据库配置之类的

好的

还有一个问题就是，我们系统经常会调用外部接口，外部接口的响应可能会超过30秒，此时后端虽然在执行，但是前端已经报500了，这个参数是不是调整ribbon的读取时间

>是的，但是网关的超时时间也需要调整
>http://hzerodoc.saas.hand-china.com/zh/docs/installation-configuration/service-config/config/ 可以参考这里的配置说明


我今天问你那个服务被注册中心强制踢掉的问题了，刚才我通过测试发现一个问题就是我们现在正式环境存在一个导出，这个导出的数据量在4W条左右，然后单独拿出来执行跑了94秒左右，查看了执行计划，添加了两个索引之后降到了27秒，但是这样在java层面上执行完之后，可能存在超过配置的30秒响应时间，这样就会报错，多次报错之后 这个服务就挂掉了。我是不是应该从sql优化着手，但是我们这个正式环境的数据库查询效率很慢，是不是考虑下硬件层面的问题

>优化是一方面，如果确实复杂需要时间查询，导出可以用异步导出。当然30秒的超时时间也是可以调整的。

那我先尝试将这个值改大 

>还要考虑调整连接池的参数，文档平台有参数设置的介绍，当然调到什么值这个要测试和验证



### SOAP接口调用时获取不到用户信息，在不改变接口的情况下怎么解决用户信息获取的问题？
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228205119306-1809966085.png)

>具体说一下场景？获不获取得到用户信息，在于是不是需要登录访问的API，通过走网关的调用的，只有这样才会有用户信息。

不是走的网关

>那就没有呀，所以你要说一下你的场景，看有没有更好的方案

这个接口没走网关，但是业务处理时走了需要获取用户信息的业务逻辑

>都不知道哪里访问的，用户信息哪里来呢

我明白了



### 调用 /iam/hzero/v1/users/self 接口报错 iam版本： 1.2.0
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228204640124-2138474708.png)

>看错误是数据库报出来的，数据库的设置可能需要调整下

嗯  ， 刚刚调了
问题解决了
[mysqld]
character-set-server=utf8mb4
lower_case_table_names=1
max_connections = 2000
max_allowed_packet = 20M



### 租户下查询自定义值集有个问题。URL形参有4个，实际参数只有3个，报错了
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228204704103-426438574.png)
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228204710395-316623345.png)

>哪个接口

查值集的是抛出来的
不是调api



### 我想请教下，这个角色查询的是hzero_platform.iam_member_role这张表吗
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228204827436-815798704.png)

>是这个表里的数据

我现在手动加了几笔数据，界面没显示出来
会有其他关联表吗

>不要自己去做呀，我们还有缓存之类的，不要自己去操作数据库

哦，明白了，缓存到了redis，多谢



### 请问下这个工作流url跳转可以把内部页面嵌入进来吗，目前试了一下是这个效果，是只可以嵌入静态的html吗。
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228205255860-1245405223.png)

>可以，要用 pub/ 这种

好的，我试试

>http://hzerodoc.saas.hand-china.com/zh/docs/development-guide/front-develop-guid/routes/pub/

好的


### 请问下，账户锁定后，到哪里可以解锁？

>到平台的子账户管理

我这个账户锁定了，我用admin来解锁没找到可操作的
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228205425372-1729449213.png)

>在这里会多出个按钮
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228205450227-235165350.png)

没有哦
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228205507452-1059579604.png)

>私聊吧


### 请问调用流程图预测时候返回数据校验不通过是什么原因，还有再流程启动里面启动流程也有几个工作流也返回数据校验不通过，都没有其他参数
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228205554254-598506276.png)

>看看日志

看哪里的日志

>工作流服务的日志



### 请问调度任务一直显示运行中是什么情况
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228205613852-599849378.png)



### 能让我们看看http://192.168.17.115:8080/iam/hzero/v1/member-roles/self-roles这个接口操作了什么表吗

>你们要做什么呢

我们自己做了注册

>注册没问题呀

现在这个接口查询，没找到角色，我们想看下查询哪几张表
移动端的
PC+移动端注册

>你们注册是用的我们的API包装做的吧
>还是直接操作的表

org.hzero.plugin.platform.hr这个封装的吗
我们没用，直接操作表

>你们思路都不对

>自己包装注册接口没问题，但是创建用户，分配角色之类的一定要用标准的API，没有必要自己去做
>主要是没有必要自己是实现一遍平台做的逻辑，后面我们优化了，你们也兼容不了

嗯，只是有点不太满足，所以就重写了几个函数

>什么不满足，包装一层不就是对不满足的加上自己的逻辑了吗
>比如自己开发一步，调用标准的+自己开发的，就两步，对外是一个API

嗯，后面我们改下

>依赖IAM服务，在下面开发自己的API，也可以直接调用标准的程序代码，事务也是一致的，比如你们会写一些产品用到的表，都是没有问题的哈。这个还是得改一下

嗯，好的
就是标准组件，都用你们给的API，我们会改了


### 远程连接服务器的mysql数据库，创建了用户hzero并且使用了root用户进行授权grant all on *.* to hzero@'%';flush privileges;，但是hzero用户还是无法创建任何数据库，初始化数据库脚本失败，问下大佬们这是什么问题
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228210028945-1837955178.png)

root用户可以创建数据库，新建的hzero用户无法创建

已经解决重启下mysql就好了



### 请问大家有没有做过基于hzero框架，全球多地部署的案例？



### 刷新了权限，但是这个接口还是报403，这个服务下的权限确实有刷新，但是就是没这个接口的，请问这是什么情况？
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228210106327-1471199015.png)

>什么版本

OP
我看这个地址里面有个organizations
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228210144219-773848351.png)

swagger上的接口地址好像没有

>感觉是前后端版本不对应

这个地址里是有organizations？

>前端调用的地址应该没有organizations
>这个只是个占位符，会被租户ID替换

不对啊
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228210226868-1517507801.png)

>正常应是这样呀
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228210239002-1467672535.png)

这个organizations 是地址里的，占位符时候面这个0 啊  这是地址硬多出来的一段  

>所以检查你们的前后端版本是不是一致  是不是对应的

好的



### 请问一下，平台jdbc是不是只支持这几种数据库
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228210324564-56390361.png)

现在项目使用postgre数据库，启动服务的时候起不起来

>这个只是jdbc开发组件，和平台使用的数据库不是一回事

这个
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228210551716-210579262.png)

我使用postgre数据源无法启动项目，切换回mysql数据库，就可以正常启动

>驱动加了吗

驱动依赖添加了
请问一下，这可能是什么原因

>无法启动有没有报错  你是什么版本

1.2.0  
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228211020771-410756596.png)

控制台输出这些信息

>有没有error的日志

有的  稍等

>发出来看看

只有这一种error日志
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228211108708-1342023607.png)

>没有数据库相关的报错么  算了 你把项目打包发我我看看

好的


### 我想问下,我这有个通过接口平台调用外部接口获取pdf的需求 我都配好了,获取到了pdf,但是存在编码问题 我看了下,接口平台好像将获取到的body 按utf8搞成String了. 我在客户端按照utf再搞成byte[],出来的pdf不正常.


由于dns问题(k8s内)
我也不方便直接用restTemplate去搞.
这有办法能绕吗.





### 请问工作流审批规则查找上级领导，我看之前定义的都是employeeCode，我再测试环境中用employeeCode测试没问题，再uat环境突然就报错
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228210353538-1740752584.png)

> 什么情况下出发的

启动工作流的时候
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228210635498-695458422.png)

然后就报数据校验不通过
启动工作流的能帮忙看下吗？employeeCode一直报无效
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228211307081-1928308154.png)
这个问题
审批规则为查找上级领导
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228211326063-2000687219.png)

>检查当前用户有没有关联组织架构

是否有岗位？

>有没有关联员工 有没有分配主岗

都关联了，上级也关联了



### 想问下钉钉发送的时候 接收人填的是平台的userId还是钉钉的userId
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200228211401551-1810854619.png)

