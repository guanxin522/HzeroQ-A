### 问下各位大佬，服务报503。hadm_service、hadm_service_route 都有数据，版本号1.1.0
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103091619882-251505010.png)

权限和文档也都刷新过了

>检查下路由表的hzero-admin路由 然后检查下hzero-admin服务的bootstrap

好的，我看一下


>admin服务的bootstrap.yml
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103091723776-165715135.png)
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103091730538-1202426858.png)

![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103091753436-445642498.png)

少了原信息的标注 没有context
我的这个是1

![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103091827634-133040257.png)

>修改下吧 你是生成的代码吗

服务创建哪里下载的

可以了，谢谢


### 麻烦问下各位大佬，为什么我前端重新编译后少了这个模块
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103092036361-1483928742.png)

我去 node_modules 看发现没有这个模块，但是昨天还有的~
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103092050597-1729736102.png)

>看看这里，没有引入hzero-front-hfpm  没有安装的话，安装一下
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103092110107-1766204619.png)

>yarn add -W hzero-front-hpfm@1.1.0 --registry=http://nexus.saas.hand-china.com/content/groups/hzero-npm-group/





### 请问1.1版本文件客户端报这个错是什么原因？
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103092156085-1423146066.png)
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103092204908-1137084872.png)

>这个可能是少依赖了 或者你依赖版本有冲突   手动引入一下 feign-replay这个依赖把
```
<dependency>
    <groupId>org.hzero.starter</groupId>
    <artifactId>hzero-starter-feign-replay</artifactId>
</dependency>
```
加了依赖还是不行
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103092522278-142795921.png)

还是报一样的错误

>我看一下你文件服务的依赖

>检查下你的这个依赖在不在
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103092630591-2017612103.png)

有的
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103092709193-1155766895.png)


文件客户端根据uuid获取文件数量是可以调用成功的，就是上传文件失败

>你用byte上传，不要用Multipart  这个我验证一下

好




### 接口平台这里的服务注册中服务认证配置的认证密码是已经改成要输入RSA加密后的密码了吗？  之前我用明文密码是可以测试成功的   现在要输入加密后的密码才能测试成功
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103092550735-517954507.png)

>是的


### 我想问下现在hzero版本有使用spring-boot的2.1的吗



### 麻烦问一下，前端启动项目突然要输入这个验证码了，这个是因为什么

![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103092335335-242368951.png)

本来是只需要像这样输入用户名密码就可以了的
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103092407868-1923677710.png)



### 多租户模式下，当子账号的数据量到了40万，子账户管理界面卡的不行

![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103091858540-1268960271.png)

> 因为SRM上有个角色分配到用户分配组织层级的功能，1.1版本拿掉了，效率会高不少  不行你们也拿掉好了
好的



###  hzero-resource 里面没包含 hzero_low_code 数据库的初始化吗？

>这个版本不会做太多的改造和优化，是一个过渡的服务，新的还在重构中



### 1.1.0版本的gateway    启动报错？ 是什么问题？
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103092827130-1341708488.png)

>看下你的启动类

是这样的
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103092852756-643615919.png)

>参考
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103092909915-1495060851.png)




### 麻烦各位大佬问下，前端新的服务IP地址我已经改了，发送请求时为什么还是原来的地址？
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103093028724-1040704693.png)

![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103093058084-1933078764.png)

>构建脚本要替换
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103093138005-635385790.png)

嗯嗯



### 配置https以后，访问外网域名报iam地址的404，有人遇到过吗
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103093325846-611108213.png)

>注册中心没有改动

![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103093345448-342387921.png)

请教下，https重定向到工作台，为什么会经过网关路由
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103093420483-1932426307.png)

>你地址配错了吧


直接就是这样的，针对workplace需要单独配置吗
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103093521860-125917265.png)


>workplace 是从哪里跳过去的

/oauth/login  登录界面ok，点登录后就到这了

>oauth 默认的登录成功地址配的什么

hi这个
https://asset.nanhaicorp.com/workplace


>你这里不是配了网关地址？

我加个网关端口试试


>登录成功地址配前端地址

 https://asset.nanhaicorp.com/workplace这个就是前端地址吧

>你前端地址和API网关地址应该是两个域名才对，你最好分开一下，另外你自己应该知道地址的呀，我们怎么知道呢





### 本地开发模式  这样覆盖配置会报错
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103093446080-34993912.png)
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103093454801-462329064.png)

>你这是做什么要加这个类

Hzero文档上的本地测试模式
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103093802884-1671567160.png)


>那你肯定有哪个步骤漏了

就只有两步啊

>这个呢
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103094300255-1918145917.png)

这个我注释了

我刚刚加上@Order改变优先级就好了
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103094421563-1514793304.png)




### 请问一下初始化hzero-registry服务时，config-client起步依赖找不到怎么解决？另外为什么hzero-registry的依赖版本时1.0.0，而不是1.1.0
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103093238949-2120832380.png)

>把choerodon-starter-config-client 换成org.springframework.cloud:spring-cloud-config-client

好的。我看之前的0.10.0的视频以及1.1.0文档的服务初始化用的是choerodon-starter-config-client。

>好的 我们更正下



### 有同学遇到过 启动 hzero-admin 服务时报数据库访问错误吗？
2019-11-14 13:02:36.255 ERROR 22713 --- [           main] o.a.i.mapping.VendorDatabaseIdProvider   : Could not get a databaseId from dataSource

java.sql.SQLException: Access denied for user 'hzero'@'192.168.123.149' (using password: YES)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:965) ~[mysql-connector-java-5.....


>你这个hzero-admin的库，没有给hzero分权限之类的吧

有，都可以访问

>Access denied for user 'hzero'@'192.168.123.149' (using password: YES)
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103093837599-702850456.png)

应该没问题的
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103093951486-202100671.png)
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103094050562-456053140.png)



>试试这个
```
grant all privileges on hzero_admin.* to 'hzero'@'%';
flush privileges;
```

>或者是不是密码错了

早就执行过了 密码也没错啊

>你本地用工具连可以？
可以

>连接信息贴出来看看

here
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103094232390-248376988.png)

>本地启动试试  我还是怀疑你密码写错了


本地启动也是一样的错误。但是密码我核对过了，没错的

这是你们的锅吧，默认配置文件。。。 我是直接复制过来的
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103094458283-1155656679.png)

用服务选配功能生成的服务

>嗯嗯，我修改下  我检查了，选配服务是正常的


### 1.1版本的swagger服务，连接的数据库配置也有问题，不知道你们改没，昨天升级的时候发现的。

>我检查了，选配服务是正常的
也是服务选配下载的  服务选配下载下来的，连接的数据库还是hzero_governance

>好的


已调整

### 这个错误是
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103094644020-1881817194.png)
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103094705063-974099715.png)

>编码

OK  不是必输项？

>这个我调整一下




### OCR 的增值税发票不是默认可用的吗？ 我刚刚找了一张真实的电子发票
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103094756066-680461145.png)

>需要购买

如果要启用的话，是有购买和配置文档指引的吧？

>配置文档我们补一下  目前我们使用的是百度的OCR
>需要结合接口平台使用

ok



### 值集配置页面的值集编码长度校验和值集视图配置新建页面的视图代码长度校验规则不一致？


### 麻烦问一下，这个接口报错是哪儿出问题了
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103095054979-1525741200.png)

>你这是原本没有这条数据吧，可能需要先手动维护下

原本数据是哪条数据  这个是新建的企业   方便指导该如何维护吗？

>oauth_password_policy 创建一条这个租户的数据

嗯嗯  我研究下    以后建立租户是否都需要手动去加呢

>你们创建租户是怎么创建的，没有调用 IAM 的接口创建？
>IAM 服务里创建租户时会自动创建安全策略、LDAP、创建租户管理员角色

通过页面上的企业添加创建的

>估计你们是自己创建的租户吧？没有调用平台的接口


是这个界面上创建的
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103095240292-1975290465.png)

>这个界面不是你们自己做的吗

>平台在租户创建的时候会做些初始化的工作，你们不要自己写这块逻辑，看是不是你们后台代码有问题

是的，这个是海马汇的标准界面。     我想问一下  hzero自带的是如何添加企业呢

>我们有租户管理功能

嗯嗯  多谢

hzero的pc界面会500  时好时坏 这个问题是如何产生的呀
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103095337462-1566011352.png)

>你这是那个环境？发一下错误信息看看

这个错误信息是从网关看吗。我从页面是很难看到的 因为页面上的跳转了就捕获不到请求
是我需要改什么配置吗


>这个
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103095605318-1398696444.png)


好的  收到。现在不报错了。等下次报错的时候我捕获看看




### 请教一下  op版本的话 也是初始化  这个目录里面的sass的吗？
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103095359983-1475900449.png)

>拉一下最新的 resource，更新了工具
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103095429992-18710986.png)

嗯嗯  好的。

下载这个1.1.0分支的就可以吧?
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103095445308-778266875.png)

>直接git pull下来切分支


### hzero-interface服务从0.11.0升级至1.0.0  上个版本是好的，一升级就不行了
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103095511398-1661393743.png)

>改一下
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103095720689-1061083721.png)

谢谢


### 请问 有人为 websocket请求配置过 nginx负载均衡吗  用户想对我们的消息服务用nginx做负载，但是我们的消息服务是 ws请求，请问配置的时候有什么需要注意的地方吗

>可参考
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103095019749-1252511906.png)

好的 谢谢 我试一下


### 想问下咱们是否有国内和海外多接点部署的项目案例可以参考一下？云或者本地的都可以




### 问一下这个东西该如何避免  一个复杂的带子查询sql
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103095821049-1503920446.png)

>sql是不是包含方言了，可以改写成标准sql避免这个问题

应该没有方言,我发出来你看下

>他解析报错的cause by 有很详细的报错信息的 你看看解析什么解析失败了

 是不支持*吗
 ![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103100010054-1183564152.png)

>支持


permissionUtil的 handleSql方法搞出来这么个sql出来
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103100031074-326555093.png)

![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103100045126-1019339694.png)
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103100053013-381453848.png)

错的是这个  这是我数据屏蔽配的有问题?
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103100130474-263727730.png)

改正确了schema名字,仍然搞出这个sql,

>你看一下所有SQL类型的规则  应该有垃圾数据
>或者你看看对应的范围

重新配了,好了,感谢



### 请问一下  1.1.0版本 工作流启动失败 
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103095844418-274568466.png)

>工作流是不是少了配置
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103095948048-121430449.png)

加了还是一样的报错。  服务端的。

>你把你的配置文件发给我

好的。我是直接拉下来的  自己没做更改

>现在报什么错
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103100539053-708975368.png)

还是昨天那个错。
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103100556195-215154449.png)

>你单词拼错了

好的


### 请问 前端打包 报 这个错 有可能是什么引起的，是内存太小了吗
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103100333154-1458123609.png)

>内存不够


### 现在 HZero 的消息服务只能给本系统内的用户发送邮件，但是给非系统用户发送邮件的功能应该是一个比较常见的功能，比如某些业务数据（如合同、证件）需要给相关人员发送邮件到期提醒，而相关人员可能并不是本系统的用户，有可能是本公司的客户或者供应商负责人，希望后面能加上这个小功能
>按理API应该是支持的。你看看API  swagger找找看
>api是支持的

我看了 MessageClient ，发邮件的方法里对于邮件接收者只有两种，一种是 recoverList，一种是 recoverGroup，这两种类型都是系统内用户

不能指定邮箱地址  直接给指定的邮箱地址发送邮件
api 是指 message服务 的 api 吗

api 里没有

>那个list对象里不就可以传邮箱么

那我试试在 Receiver 里面只放邮箱地址看看

>嗯，可以的

好的，多谢


### 使用1.1.0的脚本初始化数据
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103100444694-1173363606.png)


>数据库8.0？



### 有谁用过框架的单点登录，想请教一下

>直接说问题吧，做个单点登录的项目很多

这个页面需要单独开发吗？
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103100956870-1870238418.png)

>auth 单点？HZERO集成到别的单点系统，还是别的单点系统集成到HZERO？

hzero继承别的单点系统  oauth单点

>跟明辉沟通下看怎么配

好的，谢谢


### 大佬 500问题出在这儿 
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103101048973-448062911.png)

>响应内容是什么

什么都没有
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103101143673-1548210045.png)
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103101209829-988384468.png)

刷了多次  进来了
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103101215016-846618206.png)

>超时？你网络是不是有问题  看看日志吧

>看看注册中心的服务

网络有问题应该是页面打不开吧  应该是域名映射有点问题

也存在时好时坏
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103101328399-1793380110.png)

>看 gateway 的日志




### 容器的，management.server.port需要暴露出来吗？
![](https://img2018.cnblogs.com/blog/1231979/202001/1231979-20200103100926638-1328156849.png)

>不需要
